!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){var n,o=this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o};function n(e){if(!e)return n.__;Array.prototype.reduce||(Array.prototype.reduce=function(e,t){for(var n=t,o=0;o<this.length;o++)n=e(n,this[o],o,this);return n});var t="";return("."+e).split(".").reduce(function(e,o,r,i){t?t+="."+o:t=o;var s=e["__"+t];return void 0===s&&(n.Logger.prototype=e,s=new n.Logger(t),e["__"+t]=s),s},n.__)}!function(e){function t(e,t,n){void 0!==t[e]&&(null!==t[e]?n[e]=t[e]:delete n[e])}function n(t){if(null!=e.enabled&&!e.enabled)return!1;if(null!=e.maxMessages&&e.maxMessages<1)return!1;try{if(t.userAgentRegex&&!new RegExp(t.userAgentRegex).test(navigator.userAgent))return!1}catch(e){}try{if(t.ipRegex&&e.clientIP&&!new RegExp(t.ipRegex).test(e.clientIP))return!1}catch(e){}return!0}function r(e,t){try{if(e.disallow&&new RegExp(e.disallow).test(t))return!1}catch(e){}return!0}function i(e){return"function"==typeof e?e instanceof RegExp?e.toString():e():e}e.enabled,e.maxMessages,e.defaultAjaxUrl,e.clientIP,e.defaultBeforeSend,e.requestId="";var s=function(){return function(e,t,n){this.msg=e,this.meta=t,this.finalString=n}}();function a(e){var t,n=i(e);switch(typeof n){case"string":return new s(n,null,n);case"number":case"boolean":return t=n.toString(),new s(t,null,t);case"undefined":return new s("undefined",null,"undefined");case"object":return n instanceof RegExp||n instanceof String||n instanceof Number||n instanceof Boolean?(t=n.toString(),new s(t,null,t)):new s(null,n,JSON.stringify(n));default:return new s("unknown",null,"unknown")}}function c(){return 1e3}function l(){return 2e3}function u(){return 3e3}function p(){return 4e3}function d(){return 5e3}function f(){return 6e3}function g(e){return e<=1e3?"trace":e<=2e3?"debug":e<=3e3?"info":e<=4e3?"warn":e<=5e3?"error":"fatal"}e.setOptions=function(e){return t("enabled",e,this),t("maxMessages",e,this),t("defaultAjaxUrl",e,this),t("clientIP",e,this),t("requestId",e,this),t("defaultBeforeSend",e,this),this},e.getAllLevel=function(){return-2147483648},e.getTraceLevel=c,e.getDebugLevel=l,e.getInfoLevel=u,e.getWarnLevel=p,e.getErrorLevel=d,e.getFatalLevel=f,e.getOffLevel=function(){return 2147483647};var h=function(){return function(e,t){this.inner=t,this.name="JL.Exception",this.message=a(e).finalString}}();e.Exception=h,h.prototype=new Error;var m=function(){return function(e,t,n,o){this.l=e,this.m=t,this.n=n,this.t=o}}();e.LogItem=m;var v=function(){function o(t,n){this.appenderName=t,this.sendLogItems=n,this.level=e.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.buffer=[],this.batchBuffer=[]}return o.prototype.setOptions=function(e){return t("level",e,this),t("ipRegex",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("sendWithBufferLevel",e,this),t("storeInBufferLevel",e,this),t("bufferSize",e,this),t("batchSize",e,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this},o.prototype.log=function(e,t,o,i,s,a,c){var l;n(this)&&r(this,a)&&(s<this.storeInBufferLevel||(l=new m(s,a,c,(new Date).getTime()),s<this.level?this.bufferSize>0&&(this.buffer.push(l),this.buffer.length>this.bufferSize&&this.buffer.shift()):(s<this.sendWithBufferLevel?this.batchBuffer.push(l):(this.buffer.length&&(this.batchBuffer=this.batchBuffer.concat(this.buffer),this.buffer.length=0),this.batchBuffer.push(l)),this.batchBuffer.length>=this.batchSize&&this.sendBatch())))},o.prototype.sendBatch=function(){0!=this.batchBuffer.length&&(null!=e.maxMessages&&e.maxMessages<1||(null!=e.maxMessages&&(e.maxMessages-=this.batchBuffer.length),this.sendLogItems(this.batchBuffer),this.batchBuffer.length=0))},o}();e.Appender=v;var y=function(n){function r(e){n.call(this,e,r.prototype.sendLogItemsAjax)}return o(r,n),r.prototype.setOptions=function(e){return t("url",e,this),t("beforeSend",e,this),n.prototype.setOptions.call(this,e),this},r.prototype.sendLogItemsAjax=function(t){try{var n="/jsnlog.logger";null!=e.defaultAjaxUrl&&(n=e.defaultAjaxUrl),this.url&&(n=this.url);var o=JSON.stringify({r:e.requestId,lg:t}),r=this.getXhr(n);"function"==typeof this.beforeSend?this.beforeSend(r):"function"==typeof e.defaultBeforeSend&&e.defaultBeforeSend(r),r.send(o)}catch(e){}},r.prototype.getXhr=function(t){var n=new XMLHttpRequest;if(!("withCredentials"in n)&&"undefined"!=typeof XDomainRequest){var o=new XDomainRequest;return o.open("POST",t),o}return n.open("POST",t),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("JSNLog-RequestId",e.requestId),n},r}(v);e.AjaxAppender=y;var S=function(t){function n(e){t.call(this,e,n.prototype.sendLogItemsConsole)}return o(n,t),n.prototype.clog=function(e){console.log(e)},n.prototype.cerror=function(e){console.error?console.error(e):this.clog(e)},n.prototype.cwarn=function(e){console.warn?console.warn(e):this.clog(e)},n.prototype.cinfo=function(e){console.info?console.info(e):this.clog(e)},n.prototype.cdebug=function(e){console.debug?console.debug(e):this.cinfo(e)},n.prototype.sendLogItemsConsole=function(t){try{if(!console)return;var n;for(n=0;n<t.length;++n){var o=t[n],r=o.n+": "+o.m;"undefined"==typeof window&&(r=new Date(o.t)+" | "+r),o.l<=e.getDebugLevel()?this.cdebug(r):o.l<=e.getInfoLevel()?this.cinfo(r):o.l<=e.getWarnLevel()?this.cwarn(r):this.cerror(r)}}catch(e){}},n}(v);e.ConsoleAppender=S;var I=function(){function e(e){this.loggerName=e,this.seenRegexes=[]}return e.prototype.setOptions=function(e){return t("level",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("ipRegex",e,this),t("appenders",e,this),t("onceOnly",e,this),this.seenRegexes=[],this},e.prototype.buildExceptionObject=function(e){var t={};return e.stack?t.stack=e.stack:t.e=e,e.message&&(t.message=e.message),e.name&&(t.name=e.name),e.data&&(t.data=e.data),e.inner&&(t.inner=this.buildExceptionObject(e.inner)),t},e.prototype.log=function(e,t,o){var s,c,l=0;if(!this.appenders)return this;if(e>=this.level&&n(this)&&(o?(c=this.buildExceptionObject(o)).logData=i(t):c=t,r(this,(s=a(c)).finalString))){if(this.onceOnly)for(l=this.onceOnly.length-1;l>=0;){if(new RegExp(this.onceOnly[l]).test(s.finalString)){if(this.seenRegexes[l])return this;this.seenRegexes[l]=!0}l--}for(s.meta=s.meta||{},s.meta.loggerName=this.loggerName,l=this.appenders.length-1;l>=0;)this.appenders[l].log(g(e),s.msg,s.meta,function(){},e,s.finalString,this.loggerName),l--}return this},e.prototype.trace=function(e){return this.log(1e3,e)},e.prototype.debug=function(e){return this.log(2e3,e)},e.prototype.info=function(e){return this.log(3e3,e)},e.prototype.warn=function(e){return this.log(4e3,e)},e.prototype.error=function(e){return this.log(5e3,e)},e.prototype.fatal=function(e){return this.log(6e3,e)},e.prototype.fatalException=function(e,t){return this.log(6e3,e,t)},e}();e.Logger=I,e.createAjaxAppender=function(e){return new y(e)},e.createConsoleAppender=function(e){return new S(e)};var w=new y("");"undefined"==typeof window&&(w=new S("")),e.__=new e.Logger(""),e.__.setOptions({level:e.getDebugLevel(),appenders:[w]})}(n||(n={})),void 0!==t&&(t.JL=n),"function"==typeof __jsnlog_configure&&__jsnlog_configure(n)},function(e,t){var n;window.appConfig={},(n=appConfig).source={Mobile:"Mobile",Web:"Web"},n.pluginType={LightBox:{Name:"LightBox",Id:"6"},ConnectWithMail:{Name:"ConnectWithMail",Id:"10"},Connect:{Name:"Connect",Id:"3"},SocialShare:{Name:"SocialShare",Id:"7"},SocialBounce:{Name:"SocialBounce",Id:"8"},SocialBar:{Name:"SocialBar",Id:"9"},SocialBox:{Name:"SocialBox",Id:"2"},SocialPush:{Name:"SocialPush",Id:"11"},SocialBounceImage:{Name:"SocialBounceWithImage",Id:"12"},OnSite:{Name:"OnSite",Id:"13"},SocialBounceSurvey:{Name:"SocialBounceWithSurvey",Id:"20"},SocialBounceQuiz:{Name:"SocialBounceWithQuiz",Id:"21"},LightboxText:{Name:"LightboxText",Id:"22"},LightboxImage:{Name:"LightboxImage",Id:"23"},LightboxRedirectText:{Name:"LightboxRedirectText",Id:"25"},LightboxRedirectImage:{Name:"LightboxRedirectImage",Id:"26"}},n.Customer={SocialMiner:{Id:"064B7A45-4372-4155-A286-A06A97C7D626",Name:"SocialMiner",ProdAppId:"1443650659203895",DevAppId:"1474359889466305"}},n.GetFbApiVersion=function(){return"v2.12"},n.GetChannelUrl=function(){return"https://plugins.soclminer.com.br/v3/assets/channel.min.html"},n.GetGAPageName=function(e,t){return e+t},n.GetGAPageTitle=function(e,t){return e+" "+t},n.IsMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},n.IsApple=function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},n.IsSupportPush=function(){return!/webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},n.IsAndroid=function(){return/Android/i.test(navigator.userAgent)},n.IsChrome=function(){if(n.IsMobile())return!!window.chrome;var e=window.chrome,t=window.navigator,o=t.vendor,r=void 0!==window.opr,i=t.userAgent.indexOf("Edge")>-1;return!!t.userAgent.match("CriOS")||null!=e&&"Google Inc."===o&&!1===r&&!1===i}},function(e,t){var n;window.soclCookie={},(n=soclCookie).createCookie=function(e,t,n,o){var r="";if(n||o){var i=new Date;i.setTime(i.getTime()+(o||24*n*60*60*1e3)),r="; expires="+i.toGMTString()}var s="";window.isSecureContext&&(s="secure"),document.cookie=e+"="+t+r+"; path=/;SameSite=None;"+s},n.removeCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},n.createCookieOnSite=function(e,t,n){var o="";if(n){var r=new Date;r.setTime(r.getTime()+n),o="; expires="+r.toGMTString()}var i="";window.isSecureContext&&(i="secure"),document.cookie=e+"="+t+o+"; path=/;SameSite=None;"+i},n.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}},function(e,t){window.soclHelper={};!function(e){var t=5,n=2,o=2,r=2,s=1,a=1,c=1,l=2,u=2,p=2,d=1,f=3,g=7,h={KEY:"smeventssent_",INTERVAL:12e4},m="smeventsclear_",v={Presales_LastClick:"Presales.LastClick",Presales_AssistedSale:"Presales.AssistedSale",Presales_NoInteraction:"Presales.NoInteraction",Presales_Suppression:"Presales.Suppression",Presales_Error:"Presales.Error"},y=1,S=!1,I=["smid","utm_","gclid","iprom","ipron"],w={apiKey:"AIzaSyDV2_rHShUBKzpWTQn5DoCGdxB40aFBwnI",authDomain:"push-messaging-for-chrome-1114.firebaseapp.com",databaseURL:"https://push-messaging-for-chrome-1114.firebaseio.com",projectId:"push-messaging-for-chrome-1114",storageBucket:"push-messaging-for-chrome-1114.appspot.com",messagingSenderId:"694635173055",appId:"1:694635173055:web:51613b33da784a5058a20a"};e.urlContainsSpecificParams=function(e){var t=null;return e.split("&").forEach(function(e){for(var n=e.split("="),o=0;o<I.length;o++)n[0].startsWith(I[o])&&(t||(t={}),t[n[0]]=n[1])}),t};e.getEnvironment=function(){return""},e.getEventsCookieInfo=function(){return h};var b="https://"+e.getEnvironment()+"plugins.soclminer.com.br/v3/assets/js/",_=1;e.PROXY_URI="https://"+e.getEnvironment()+"plugins.soclminer.com.br/v3/assets/proxy.min.html",e.replaceAll=function(e,t,n){return n.replace(new RegExp(function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}(e),"g"),t)},e.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},e.formatDate=function(e){var t=new Date(e),n=""+(t.getMonth()+1),o=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),[r,n,o].join("-")},e.getNow=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),e.getFullYear()+"-"+n+"-"+t+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},e.contains=function(e,t){return-1!=e.indexOf(t)},e.getQueryStringParams=function(e,t){for(var n=(t||window.location.search.substring(1)).split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if(r[0]==e)return r[1]}},e.extractClientIdFromUrl=function(){var e=null;try{!(e=soclHelper.getQueryStringParams("clientId")||soclHelper.getQueryStringParams("clientId",window.location.search.substring(1)))&&window.opener&&(e=soclHelper.getQueryStringParams("clientId",window.opener.location.search.substring(1)))}catch(e){console.log("SM - [URSA] - extractClientIdFromUrl - Failed to extract clientId: ".concat(e))}return e},e.extractSessionHashFromUrl=function(){var e=null;try{!(e=soclHelper.getQueryStringParams("sessionHash")||soclHelper.getQueryStringParams("sessionHash",window.location.search.substring(1)))&&window.opener&&(e=soclHelper.getQueryStringParams("sessionHash",window.opener.location.search.substring(1)))}catch(e){console.log("SM - [URSA] - extractSessionHashFromUrl - Failed to extract sessionHash: ".concat(e))}return e},e.toGUID=function(e){var t="";return""!==e&&(t=(t=(t=(t=(t+=e.substring(0,8))+"-"+e.substring(8,12))+"-"+e.substring(12,16))+"-"+e.substring(16,20))+"-"+e.substring(20,32)),t},e.hasClass=function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},e.updateAccessToken=function(e){e&&(soclCookie.getCookie("smextoken_"+e)||soclConnect.getStatus(function(t){t&&soclConnect.getFbCurrentAccessToken(function(t){t&&soclConnect.getId(e,function(n){n&&getCORS(apiUrl+"/fb/exchangeToken/"+e+"/"+t+"/?format=json",null,function(t){postCORS(apiUrl+"/users/profile/"+t.response.accessToken+"/?format=json",{customerId:e,userId:n},function(t){soclCookie.createCookie("smextoken_"+e,!0,7)})})})})}))},e.formatUrlBy=function(e,t,n,o){if(n&&n.length){var r=[apiUrl+"/customers/"+e+"/formaturl?format=json&pluginType="+t],i=(r=r.concat(n)).join("&url=");getCORS(i,null,function(e){o(e)})}},e.formatUrlPipe=function(e){var t=JSON.parse(e);return t.link=t.link.replace("|",encodeURI("|")),t.linkView=t.linkView.replace("|",encodeURI("|")),t=JSON.stringify(t)},e.findLocalItems=function(e){var t,n=[];for(t in localStorage)localStorage.hasOwnProperty(t)&&(t.match(e)||!e&&"string"==typeof t)&&(value=JSON.parse(localStorage.getItem(t)),n.push(t));return n},e.getCustomerInfo=function(t,n,o){e.getParamOnSession(function(r){var i=""!==document.referrer?encodeURIComponent(document.referrer):"";-1!==i.indexOf("minerlanding")&&(i="https://minerlanding.soclminer.com.br");var s=e.findLocalItems("onsiteview_"),a="";s.forEach(function(e){a+="&OnsiteViewed="+e}),getCORS(apiUrl+"/customers/"+t+"?format=json&url="+n+"&referrer="+i+"&paramOnSession="+r+"&isMobile="+e.isMobile()+a,null,function(e){o(e)})})},e.createSessionHash=function(e){return H(e+soclConnect.generateRndGuidV4()+(new Date).toISOString())},e.getSessionHash=function(){return e.getSessionStorageValue("session-guid")};var C=function(e){if(function(e){return e&&e.length&&("{"===e[0]||"["===e[0])}(e)){var t=JSON.parse(e);return t instanceof Array?t.map(function(e){return C(e)}):Object.entries(t).reduce(function(e,t){var n=t[0],o=t[1],r={};return r[n]=C(o),Object.assign({},e,r)},{})}return e},E=function(t,n){var o=soclHelper.replaceAll("-","",t),r=e.replaceAll("{0}",o,(n||"logs")+"_{0}");return soclTracking.getLocalDB(r)};e.getMetadata=function(){var e=window.sm__dataLayer||{};for(i in e)e[i]=e[i]instanceof Array?e[i].toString():e[i];return e},e.postBehaviors=function(t,n,o,r){var i="smbehaviorssent_"+e.replaceAll("-","",t),s=function(){var e=O(t,n,r);e.forEach(function(e){e.userAgent=navigator.userAgent,postJsonCORS("https://wonka.socialminer.com/ursa/enterprise/behaviors",e)}),soclCookie.createCookie(i,"true",null,12e4)};if(o)s();else{var a=!soclCookie.getCookie(i);soclHelper.getPurchaseUrl(function(e){var t,n,o=(t=e,n=document.location.href.replace(/^(http|https):\/\//i,""),t.some(function(e){return e=e.replace(/^(http|https):\/\//i,""),soclHelper.contains(n,e)}));(a||o)&&s()})}},e.getSMIDToIFrameSrc=function(e,t){if(t)return"&userId="+t;var n=soclHelper.getStoreValue(soclConnect.createSMIdKey(e));return n?"&userId="+n:""},e.setCustomerInfoToLocalStorage=function(t){var n="smCustomerInfo_"+e.replaceAll("-","",t.id);return e.setLocalStorageValue(n,t)},e.getCustomerInfoFromLocalStorage=function(t){var n="smCustomerInfo_"+e.replaceAll("-","",t);return e.getLocalStorageValue(n)},e.existsUrlWithPersonId=function(){return location.href.includes("smid")&&location.search.split("p=")[1]},e.getPersonIdFromUrl=function(){return location.search.split("p=")[1]};var O=function(e,t,n){var o=new Date("2019-07-01 00:00:00"),r=[],i=E(e);if(i.tableExists("items")){var s={limit:10},a=i.queryAll("items",s);if(a&&a.length){var c=a.slice(0,10).reduce(function(r,i){if(new Date(i.date)<o)return r;var s={customerId:e,clientId:i.clientId||t,personId:n,metadata:i.metadata||{},url:encodeURIComponent(i.url),referer:""!==i.referrer?encodeURIComponent(i.referrer):""};s.metadata=P(s.metadata);var a=i.sessionHash||"00000000-0000-0000-0000-000000000000",c=r[a]||[];return c.push(s),r[a]=c,r},{});r=Object.keys(c).map(function(e){return{behaviors:c[e],sessionHash:e}});var l=0;i.deleteRows("items",function(e){return++l<=10}),i.commit()}}return r},P=function(e){return e?(delete e.price,delete e.notAvailable,e):{}};e.createEvent=function(t){soclHelper.getCID(function(n){if((0!==n||t.customerId)&&t&&t.type&&t.type.trim().length>0){var o=e.getOrCreateSMObj(n||t.customerId),r=soclHelper.replaceAll("-","",n||t.customerId),i=e.getOrCreateSessionHash(),s={type:t.type,step:t.step,channelId:t.channelId,customerId:n||t.customerId,clientId:o.clientId,systemId:y,dateTime:e.getNow(),personId:t.personId||soclHelper.getStoreValue("smid_"+r),additionalData:encodeURI(JSON.stringify(t.additionalData||{}))},a="events_"+r;soclTracking.insertEventItem(a,{sessionHash:i,event:s}),socl.emmit.onEvent(s)}})},e.shouldSendEvents=function(e){return!soclCookie.getCookie(h.KEY+e)},e.sendEvents=function(t,n){if(e.shouldSendEvents(t)||n){var o=x(t),r="https://"+e.getEnvironment()+"wonka.socialminer.com/ursa/enterprise/events";o.forEach(function(e){postJsonCORS(r,e)}),soclCookie.createCookie(h.KEY+t,"true",null,h.INTERVAL),soclCookie.createCookie(m+t,"true",60)}};var x=function(e){var t=[],n=E(e,"events");if(n.tableExists("items")){var o={limit:5},r=n.queryAll("items",o);if(r&&r.length){var i=r.slice(0,5).reduce(function(e,t){var n={type:t.event.type,step:t.event.step,channelId:t.event.channelId,customerId:t.event.customerId,clientId:t.event.clientId,systemId:t.event.systemId,dateTime:t.event.dateTime,personId:t.event.personId,additionalData:t.event.additionalData},o=t.sessionHash,r=e[o]||[];return r.push(n),e[o]=r,e},{});t=Object.keys(i).map(function(e){return{events:i[e],sessionHash:e}});var s=0;n.deleteRows("items",function(e){return++s<=5}),n.commit()}}return t};e.getPluginSettingsByType=function(e,t,n,o){getCORS(apiUrl+"/customers/"+e+"/feature/"+t+"?format=json&pluginType="+n,null,function(e){o(e)})},e.getPluginSettings=function(e,t,n){getCORS(apiUrl+"/customers/"+e+"/feature/"+t+"?format=json",null,function(e){n(e)})};var H=function(e,t){function n(e,t){return e<<t|e>>>32-t}var o,r,i,s,a,c,l,u,p,d,f=function(e){var t,n="";for(t=7;t>=0;t--)n+=(e>>>4*t&15).toString(16);return n},g=new Array(80),h=1732584193,m=4023233417,v=2562383102,y=271733878,S=3285377520,I=(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}(e)).length,w=[];for(r=0;r<I-3;r+=4)i=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),w.push(i);switch(I%4){case 0:r=2147483648;break;case 1:r=e.charCodeAt(I-1)<<24|8388608;break;case 2:r=e.charCodeAt(I-2)<<24|e.charCodeAt(I-1)<<16|32768;break;case 3:r=e.charCodeAt(I-3)<<24|e.charCodeAt(I-2)<<16|e.charCodeAt(I-1)<<8|128}for(w.push(r);w.length%16!=14;)w.push(0);for(w.push(I>>>29),w.push(I<<3&4294967295),o=0;o<w.length;o+=16){for(r=0;r<16;r++)g[r]=w[o+r];for(r=16;r<=79;r++)g[r]=n(g[r-3]^g[r-8]^g[r-14]^g[r-16],1);for(s=h,a=m,c=v,l=y,u=S,r=0;r<=19;r++)p=n(s,5)+(a&c|~a&l)+u+g[r]+1518500249&4294967295,u=l,l=c,c=n(a,30),a=s,s=p;for(r=20;r<=39;r++)p=n(s,5)+(a^c^l)+u+g[r]+1859775393&4294967295,u=l,l=c,c=n(a,30),a=s,s=p;for(r=40;r<=59;r++)p=n(s,5)+(a&c|a&l|c&l)+u+g[r]+2400959708&4294967295,u=l,l=c,c=n(a,30),a=s,s=p;for(r=60;r<=79;r++)p=n(s,5)+(a^c^l)+u+g[r]+3395469782&4294967295,u=l,l=c,c=n(a,30),a=s,s=p;h=h+s&4294967295,m=m+a&4294967295,v=v+c&4294967295,y=y+l&4294967295,S=S+u&4294967295}return p=f(h)+f(m)+f(v)+f(y)+f(S),t?(d=p.toLowerCase(),btoa(String.fromCharCode.apply(null,d.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))):p.toLowerCase()};e.getPluginSettingsDemo=function(e,t,n,o,r){getCORS(apiUrl+"/customers/"+e+"/feature/"+t+"?format=json&pluginType="+n+"&pluginIdentifier="+o,null,function(e){r(e)})},e.listCampaignsBy=function(t,n){var o=e.isMobile()?g:f,r=apiUrl+"/customers/"+t+"/campaign/?format=json&channelType="+o;getCORS(r,null,function(e){n(e)})},e.setSessionValue=function(e,t){try{window.sessionStorage.setItem(e,t)}catch(e){}},e.setStoreValue=function(e,t){try{window.localStorage.setItem(e,t.replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"'))}catch(e){}},e.setCookie=function(e,t,n){try{soclCookie.createCookie(e,t,n)}catch(e){}},e.getSessionValue=function(e){var t=null;try{t=window.sessionStorage.getItem(e,t)}catch(e){}return t},e.categorizeLastClick=function(e,t){try{var n={};if(e=e||[],t=t||[],sortedImpactList=e.slice().reverse(),sortedViewList=t.slice().reverse(),n.additionalData={Impact:e,Views:t},impact=sortedImpactList.find(function(e){return e.smid}),impact)return 0==sortedImpactList.indexOf(impact)?(n.type=v.Presales_LastClick,n):(n.type=v.Presales_AssistedSale,n);if(sortedViewList.length){if(sortedViewList[0].kind&&"suppression"===sortedViewList[0].kind){var o=sortedViewList.find(function(e){return"suppression"==e.kind}),r=sortedViewList.find(function(e){return"view"==e.kind});if(!r)return n.type=v.Presales_Suppression,n;if(delta=new Date(o.create_date)-new Date(r.create_date),delta>18e5)return n.type=v.Presales_Suppression,n}return n.type=v.Presales_NoInteraction,n}}catch(e){return n.type=v.Presales_Error,n}},e.addOrGetCookieAsList=function(e,t){var n=[];try{if(n=JSON.parse(soclCookie.getCookie(e)),!Array.isArray(n)){var o=n;n=[],"object"==typeof o&&n.push(o)}}catch(e){n=[]}return t&&n.push(t),n.slice(Math.max(n.length-10,0))},e.addOrGetEvent=function(t,n,o){return e.addOrGetLocalStoreAsList(n,o)},e.addOrGetLocalStoreAsList=function(t,n){var o=[];try{if(soclCookie.getCookie(t)?(o=JSON.parse(soclCookie.getCookie(t)),e.setStoreValue(t,soclCookie.getCookie(t)),soclCookie.removeCookie(t)):e.getLocalStorageValue(t)&&(o=e.getLocalStorageValue(t)),!Array.isArray(o)){var r=o;o=[],"object"==typeof r&&null!=r&&o.push(r)}}catch(e){o=[]}return n&&o.push(n),o.slice(Math.max(o.length-10,0))};var k=new RegExp("^sm__"),T=function(e){return"sm__"+e.replace(k,"")};e.getLocalStorageValue=function(e){var t=window.localStorage.getItem(T(e));return!t||"["!==t[0]&&"{"!==t[0]?t:C(t)},e.setLocalStorageValue=function(e,t){return window.localStorage.setItem(T(e),"object"==typeof t?JSON.stringify(t):t),t},e.getSessionStorageValue=function(e){var t=window.sessionStorage.getItem(T(e));return!t||"["!==t[0]&&"{"!==t[0]?t:JSON.parse(t)},e.setSessionStorageValue=function(e,t){return window.sessionStorage.setItem(T(e),"object"==typeof t?JSON.stringify(t):t),t},e.getStoreValue=function(e){var t=null;try{t=window.localStorage.getItem(e)}catch(e){}return t},e.removeSessionValue=function(e){try{window.sessionStorage.removeItem(e)}catch(e){}},e.removeStoreValue=function(e){try{window.localStorage.removeItem(e)}catch(e){}},e.clearSession=function(){try{window.sessionStorage.clear()}catch(e){}},e.clearStore=function(){try{window.localStorage.clear()}catch(e){}},e.computePluginHit=function(e,t){soclHelper.getCID(function(n){0!==n&&soclHelper.getPID(t,function(o){0!==o&&soclPerfCounter.event(o,e,t,n)})})},e.getCID=function(t){var o=soclHelper.getStoreValue("smcid");null!==o&&""!==o?t(o):setTimeout(function(){--n>0?e.getCID(t):t(0)},1e3)},e.isInControlGroup=function(e,t){return e&&t&&e<=t},e.isInSuppressionGroup=function(e,t){if(!t)return!1;try{var n=soclHelper.getCustomerInfoFromLocalStorage(e),o=soclHelper.getOrCreateSMObj(e),r=n.features.find(function(e){return e.pluginId==t});return r&&soclHelper.isInControlGroup(o.randomNumber,r.controlGroupPercentage||0)}catch(e){console.log(e)}};e.getOrCreateSMObj=function(t){var n,o=soclConnect.getSMObjIdKey(t),r=e.getLocalStorageValue(o)||{};return r.clientId&&r.randomNumber||(r.clientId=r.clientId||soclConnect.generateRndGuidV4(),r.randomNumber=r.randomNumber||(n=100,Math.floor(Math.random()*n+1)),e.setLocalStorageValue(o,r)),r},e.getOrCreateSessionHash=function(t){return e.getSessionStorageValue("session-guid")||e.setSessionStorageValue("session-guid",e.createSessionHash(t))},e.getPID=function(t,n){var r=soclHelper.getStoreValue("smpid_"+t);null!==r&&""!==r?n(r):setTimeout(function(){--o>0?e.getPID(n):n(0)},1e3)},e.getParamOnSession=function(t){var n=soclHelper.getSessionValue("paramOnSession");null!==n&&""!==n?t(n):setTimeout(function(){--d>0?e.getParamOnSession(t):t("")},1e3)},e.getPurchaseUrl=function(t){var n=soclHelper.getStoreValue("smpurl");null!==n&&""!==n&&"undefined"!==n?t(n.split(",")):setTimeout(function(){--l>0?e.getPurchaseUrl(t):t([])},1e3)},e.getTagsParameter=function(t){var n=soclHelper.getStoreValue("smtp");null!==n&&""!==n&&"undefined"!==n?t(JSON.parse(n)):setTimeout(function(){--u>0?e.getTagsParameter(t):t(new Array)},1e3)},e.getPushEndpoint=function(t){var n=soclHelper.getStoreValue("pushendpoint");null!==n&&""!==n?t(n):setTimeout(function(){--s>0?e.getPushEndpoint(t):t("")},1e3)},e.hasPushOptInBy=function(t,n){var o=soclHelper.getStoreValue("smpushoptin_"+t),r=soclHelper.getStoreValue("smid_"+t);null!==o&&""!==o&&0!=r?n(o):setTimeout(function(){--a>0?e.hasPushOptInBy(t,n):n(!1)},1e3)},e.guidValidation=function(e){return/^[0-9a-f]{8}[0-9a-f]{4}[1-5][0-9a-f]{3}[89ab][0-9a-f]{3}[0-9a-f]{12}$/i.test(e)},e.hasFBOptIn=function(t){var n=soclHelper.getStoreValue("userConnected");null!==n&&""!==n?t(!0):setTimeout(function(){--c>0?e.hasFBOptIn(t):t(!1)},1e3)},e.getCloseUrl=function(t){var n=soclHelper.getStoreValue("smcloseurl");null!==n&&""!==n&&"undefined"!==n?t(n):setTimeout(function(){--p>0?e.getCloseUrl(t):t("")},1e3)},e.getRedirectUrl=function(t){var n=soclHelper.getStoreValue("smredirecturl");null!==n&&""!==n&&"undefined"!==n?t(n):setTimeout(function(){--p>0?e.getCloseUrl(t):t("")},1e3)},e.getPosition=function(){var e=document.documentElement,t=document.body,n="scrollTop",o="scrollHeight";return percent=(e[n]||t[n])/((e[o]||t[o])-e.clientHeight)*100},e.CGSplitTraffic=function(e,t){var n=new Math.seedrandom;result=n.quick(),result<=e?t(!0):t(!1)},e.userInControlGroup=function(t,n){t.cgActive?(!function(e,t,n){getCORS(apiUrl+"/customers/"+e+"/cgsettings/"+t+"?format=json",null,function(e){n(e)})}(t.id,_,function(t){e.CGSplitTraffic(t.response.threshold,function(e){n(e)})}),soclHelper.setSessionValue("controlGroupActive",!0)):n(!1)},e.showPlugin=function(t,n,o){soclHelper.getStoreValue(soclConnect.createSMIdKey(t));var i=soclHelper.getStoreValue(t),s=soclCookie.getCookie("viewedOuibounceModal_"+n);null!==i&&""!==i||"true"===s?o(!1):setTimeout(function(){--r>0?e.showPlugin(t,n,o):o(!0)},1e3)},e.createBaseIframe=function(){var e=document.createElement("iframe");return e.frameBorder="0",e.marginWidth="0",e.marginHeight="0",e.scrolling="no",e.width=1,e.height=1,e},e.injectDiv=function(e,t){if(!document.getElementById(e)){var n=document.createElement("div");n.id=e,n.style.display=t,document.body.insertBefore(n,document.body.childNodes[0])}},e.removeElementById=function(e){document.getElementById(e)&&document.getElementById(e).remove()},e.injectManifest=function(e,t){var n,o=document.getElementsByTagName("script")[0];(n=document.createElement("link")).href=e+t,n.rel="manifest",o.parentNode.insertBefore(n,o)},e.injectCSS=function(e,t){if(!function(e,t,n,o){for(var r=document.getElementsByTagName(e),i=0,s=r.length;i<s;i++)if(r[i][t]==n+o)return!1;return!0}("link","href",e,t))return!1;var n,o=document.getElementsByTagName("script")[0];(n=document.createElement("link")).href=e+t,n.rel="stylesheet",o.parentNode.insertBefore(n,o)},e.injectPAJS=function(e){if(!document.getElementById("pajs")){var n,o=document.getElementsByTagName("script")[0];(n=document.createElement("script")).id="pajs",n.src=b+"pajs.min.js",n.type="text/javascript",o.parentNode.insertBefore(n,o)}!function(e){var n=window.setInterval(function(){try{"undefined"!=typeof Porthole?(window.clearInterval(n),e(!0)):0==--t&&(window.clearInterval(n),e(!1))}catch(e){}},1e3)}(e)},e.injectScrollJS=function(){if(!document.getElementById("scroll")){var e,t=document.getElementsByTagName("script")[0];(e=document.createElement("script")).id="scroll",e.src=b+"scroll.min.js",e.type="text/javascript",t.parentNode.insertBefore(e,t)}},e.injectOUIBounce=function(){if(!document.getElementById("pajs_b")){var e,t=document.getElementsByTagName("script")[0];(e=document.createElement("script")).id="pajs_b",e.src=b+"ouibounce.min.js",e.type="text/javascript",t.parentNode.insertBefore(e,t)}},e.injectCrawler=function(e,t){var n="https://static.socialminer.com/customers/"+e+"/crawler/crawler.js";if(document.getElementById("sm_crawler"))t&&setTimeout(t,1);else{var o=document.createElement("script"),r=function(){t&&t(),t=null};if("undefined"==typeof smCrawler){o.addEventListener("load",r),o.onerror=function(){console.error("Crawler not loaded: ",n),r()},o.id="sm_crawler",o.type="text/javascript",o.src=n;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i)}else setTimeout(function(){smCrawler(),r()},1)}},e.insertAddonJs=function(){var e=soclHelper.getStoreValue("smcid");if(e){var t="https://static.socialminer.com/custom/"+e+"/custom.js";if(!document.getElementById("sm_addon")){var n=document.createElement("script");n.id="sm_addon",n.type="text/javascript",n.src=t;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}}},e.removeAddonJs=function(){soclHelper.removeElementById("sm_addon")},e.IsGAEnabled=function(e){return null!==e&&""!==e&&"undefined"!==e&&"true"===e},e.checkGA=function(){return"function"==typeof ga},e.convertMS=function(e){var t,n,o;return o=Math.floor(e/1e3),n=Math.floor(o/60),o%=60,t=Math.floor(n/60),n%=60,{day:Math.floor(t/24),hour:t%=24,minute:n,seconds:o,decimalDay:(e/1e3/60/60/24).toFixed(2)}},e.prepareForSPA=function(e,t){S||(void 0===window.socl_checkIsSPA?(window.socl_checkIsSPA=!0,t&&soclHelper.simulateSPA(e)):S=!0)},e.simulateSPA=function(e){var t=history.pushState;history.pushState=function(){t.apply(history,arguments),socl.start(e,1)}},e.setIsSPA=function(){S=!0},e.checkIsSPA=function(){return S},e.initFirebase=function(t){if("undefined"!=typeof firebase)return firebase.apps.length>0?t(!0):(firebase.initializeApp(w),t(!0));e.importFirebase(function(e){return e&&firebase.initializeApp(w),t(e)})},e.importFirebase=function(e){var t=document.createElement("script");document.head.appendChild(t),t.onload=function(){var t=document.createElement("script");document.head.appendChild(t),t.onload=function(){return e(!0)},t.src="https://www.gstatic.com/firebasejs/7.11.0/firebase-messaging.js"},t.src="https://www.gstatic.com/firebasejs/7.11.0/firebase-app.js"}}(soclHelper)},function(e,t){var n,o,r,i,s,a,c,l,u,p,d,f,g,h,m,v,y,S,I;window.soclTracking={},n=soclTracking,r="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/tracking/html/",i=5,s=6,a=7,c=8,l=3,u=4,p=function(e){return e=soclHelper.contains(e,"&amp;")?soclHelper.replaceAll("&amp;","|",e):soclHelper.replaceAll("&","|",e)},d=function(e){return e=soclHelper.contains(e,"&amp;")?soclHelper.replaceAll("&amp;","|",e):soclHelper.replaceAll("&","|",e)},f=function(e){return""===e||void 0===e?document.referrer:e},g=function(e,t){if(soclHelper.guidValidation(e)){var o=[];t.logs.constructor==String&&(t.logs=JSON.parse(t.logs));for(var r=0;r<t.logs.length;r++)o.push(JSON.stringify({Url:encodeURIComponent(t.logs[r].url),Referrer:encodeURIComponent(t.logs[r].referrer),Date:t.logs[r].date,CustomerId:t.customerId,Price:t.logs[r].metadata?(s=t.logs[r].metadata,a=void 0,a=s.price||(s.product?s.product.price:""),a?d(a):""):"",IsAvailable:void 0!==t.logs[r].metadata.notAvailable?d(t.logs[r].metadata.notAvailable):""}));!function(e,t,o){n.actionBatch(e,t,function(e){e&&localStorage.removeItem("db_"+o)})}(e,o,t.dbName);try{var i=soclHelper.getOrCreateSMObj(t.customerId);soclHelper.postBehaviors(t.customerId,i.clientId,!0,e)}catch(e){console.log(e)}}var s,a},h=function(e,t){var n,o=void 0;switch(e){case s:o=(n=document.getElementsByClassName(t)).length>0?n[0].innerHTML:o;break;case i:var r=document.getElementById(t);o=null!==r?r.innerHTML:o;break;case c:o=(n=document.getElementsByTagName(t)).length>0?n[0].innerHTML:o;break;case a:o=(n=document.getElementsByName(t)).length>0?n[0].innerHTML:o}return o},m=function(){(o=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"sm-tracking-iframe")).addEventListener(v)},v=function(e){void 0!==e.data.tracking&&soclHelper.getPurchaseUrl(function(t){!function(e,t){if(e.length>0)for(var n=0;n<e.length;n++)if(o=document.location.href,r=e[n],o=o.replace(/^(http|https):\/\//i,""),r=r.replace(/^(http|https):\/\//i,""),soclHelper.contains(o,r))return void t(!0);var o,r;t(!1)}(t,function(t){var r,i=e.data.tracking,s=soclHelper.replaceAll("{0}",i,"logs_{0}"),a=n.getLocalDB(s);if(t){if(a.tableExists("items")){var c=a.queryAll("items");o.post({logs:c,anonymous:soclHelper.getStoreValue("smanonymous"),isPurchase:t})}}else r=function(e){null!==e&&(a.tableExists("items")?(a.update("items",{ID:a.rowCount("items")},function(t){return l===e.key?t.metadata.price=e.value.replace(/"/g,"").replace(/\s/g,""):t.metadata.notAvailable=e.value,t}),a.commit()):(a.createTable("items",["url","referrer","date","metadata"]),a.commit())),a.tableExists("items")&&o.post({logs:a.queryAll("items"),anonymous:soclHelper.getStoreValue("smanonymous"),isPurchase:t})},soclHelper.getTagsParameter(function(e){e.constructor==String&&(e=JSON.parse(e));for(var t={},n=0;n<e.length;n++){switch(e[n].type){case l:void 0!==h(e[n].rule,e[n].value)&&(t.key=l,t.value=h(e[n].rule,e[n].value));break;case u:void 0!==h(e[n].rule,e[n].value)&&(t.key=u,t.value=h(e[n].rule,e[n].value))}if(void 0!==t.key){r(t);break}}void 0===t.key&&r(null)})})}),void 0!==e.data.smid&&soclConnect.getId(e.data.customerId,function(t){var o=soclHelper.replaceAll("{0}",e.data.customerId,"logs_{0}");if(0==t&&0!=e.data.smid&&(soclHelper.setStoreValue(soclConnect.createSMIdKey(e.data.customerId),e.data.smid),soclHelper.setStoreValue("soclId",e.data.smid)),void 0!==e.data.checkOrganicPushNative&&!0===e.data.checkOrganicPushNative)soclHelper.hasPushOptInBy(e.data.customerId,function(r){var i={customerId:e.data.customerId,logs:n.getLocalDB(o).queryAll("items"),dbName:o};(r||0!=t)&&g(t,i)});else{var r={customerId:e.data.customerId,logs:n.getLocalDB(o).queryAll("items"),dbName:o};0!==t&&g(t,r)}}),void 0!==e.data.smAnonymousId&&soclConnect.getId(e.data.customerId,function(e){0!==e&&o.post({smAnonymousId:e})}),void 0!==e.data.smUserIdFromPushNative&&o.post({smUserIdFromPushNative:id})},y=function(e,t){soclConnect.getFbId(function(o){o>0?n.setSMIdByFbId(o,e.customerId,function(n){0!==n?t(n,!0):soclConnect.registerConnectedUser(o,e.customerId,5,null,function(e){t(e,!0)})}):t(0,!0)})},S=function(e,t){soclHelper.hasFBOptIn(function(n){n?soclHelper.hasPushOptInBy(e.customerId,function(n){n?(g(id,e),t(id,!1)):y(e,function(e,n){t(e,n)})}):y(e,function(e,n){t(e,n)})})},I=function(e,t,n){"00000000000000000000000000000000"!==t.response.id?(soclHelper.setStoreValue(soclConnect.createSMIdKey(e),t.response.id),soclHelper.setStoreValue("soclId",t.response.id),n(t.response.id)):n(0)},n.getLocalDB=function(e){return new localStorageDB(e,localStorage)},n.createLogDB=function(e){try{var t=n.getLocalDB(e),o=["url","referrer","date","metadata","clientId","sessionHash"];if(t.isNew()){t.createTable("items",o),t.commit();var r=localStorage.getItem("db_"+e).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"');localStorage.setItem("db_"+e,r)}else t.tableExists("items")||(t.createTable("items",o),t.commit()),t.columnExists("items","clientId")||(t.alterTable("items",["clientId","sessionHash"]),t.commit());t.tableExists("items")||(t.createTable("items",o),t.commit())}catch(t){console.log("creation of table items error => "+e),localStorage.removeItem("db_"+e)}},n.createEventDB=function(e){try{var t=n.getLocalDB(e),o=["sessionHash","event"];if(t.isNew()){t.createTable("items",o),t.commit();var r=localStorage.getItem("db_"+e).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"');localStorage.setItem("db_"+e,r)}t.tableExists("items")||(t.createTable("items",o),t.commit())}catch(t){console.log("creation of table items error => "+e),localStorage.removeItem("db_"+e)}},n.insertLogItem=function(e,t){try{var o=n.getLocalDB(e);o.tableExists("items")||n.createLogDB(e),o.insert("items",t),o.commit();var r=localStorage.getItem("db_"+e).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"');localStorage.setItem("db_"+e,r)}catch(t){localStorage.removeItem("db_"+e),n.createLogDB(e)}},n.insertEventItem=function(e,t){try{var o=n.getLocalDB(e);o.tableExists("items")||n.createEventDB(e),o.insert("items",t),o.commit();var r=localStorage.getItem("db_"+e).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"');localStorage.setItem("db_"+e,r)}catch(t){localStorage.removeItem("db_"+e),n.createEventDB(e)}},n.setSMIdToAnonymousUser=function(e,t){null!==t&&""!==t&&"undefined"!==t&&void 0!==t&&soclHelper.setStoreValue(soclConnect.createSMIdKey(e),t)},n.setSMIdByUrl=function(e){var t=soclHelper.getQueryStringParams("smuid");null!==t&&""!==t&&"undefined"!==t&&void 0!==t&&soclHelper.setStoreValue(soclConnect.createSMIdKey(e),t)},n.setSMIdByPush=function(e,t,n){getCORS(apiUrl+"/users/push/?format=json&customerId="+e+"&endpoint="+t,null,function(t){I(e,t,n)})},n.setSMIdByPushOrganic=function(e,t,n){postCORS(apiUrl+"/users/push",{customerId:e,pushEndpoint:t,isMobile:soclHelper.isMobile()},function(t){I(e,t,n)})},n.setSMIdByFbId=function(e,t,n){getCORS(apiUrl+"/users/social/"+e+"/?format=json&customerId="+t,null,function(e){I(t,e,n)})},n.createDataObj=function(e,t,n,o){return{soclId:e,url:p(f(t)),referrer:n,customerId:o}},n.actionBatch=function(e,t,n){t.length>0&&postCORS(apiUrl+"/users/"+e+"/action/batch?format=json",{Logs:t},function(e){n(!0)})},n.action=function(e,t){postCORS(apiUrl+"/users/"+e.soclId+"/action/?format=json",{customerId:e.customerId,url:e.url,referrer:e.referrer},function(e){t(!0)})},n.IsParametersOk=function(e){var t=!0;if(!e)return!1;for(var n in e)if(!(t=!!e[n]))return t;return t},n.event=function(e,t){soclHelper.getCID(function(o){0!==o&&soclConnect.getId(o,function(r){if(0!==r){postCORS(apiUrl+"/users/"+r+"/event/?format=json",{customerId:o,eventName:e,parameters:n.IsParametersOk(t)?JSON.stringify(t):JSON.stringify({}),url:document.location.href,referrer:document.referrer},function(e){});try{var i=soclHelper.getOrCreateSMObj(o);soclHelper.postBehaviors(o,i.clientId,!0,r)}catch(e){console.log(e)}}else try{if(e&&e.toLowerCase().includes("purchase")){i=soclHelper.getOrCreateSMObj(o);var s=soclHelper.getCustomerInfoFromLocalStorage(o);s&&i&&s.sendAnonymousData&&soclHelper.isInControlGroup(i.randomNumber,s.baseSizePercent)&&soclHelper.postBehaviors(o,i.clientId,!0)}}catch(e){console.log(e)}try{var a=soclHelper.addOrGetEvent(o,"sm_event_impact"),c=soclHelper.addOrGetEvent(o,"sm_views"),l=soclHelper.categorizeLastClick(a,c);if(l){l.additionalData.Sale=t||{},soclHelper.createEvent(l);var u=soclHelper.replaceAll("-","",o);soclHelper.sendEvents(u,!0)}}catch(e){console.log("SM - Failed on sending Presales event.")}})})},n.logViewToConnectedUser=function(e,t){soclConnect.getId(e.customerId,function(n){0!==n?(e.dbName=soclHelper.replaceAll("{0}",e.customerId,"logs_{0}"),"true"==e.pushNativeEnabled?S(e,function(e,n){t(e,n)}):y(e,function(e,n){t(e,n)})):y(e,function(n,o){"true"==e.pushNativeEnabled?t(n,o):t(n,!1)})})},n.setPushOptInBy=function(e,t){},n.init=function(e){soclHelper.injectDiv("sm-tracking","none"),function(e){try{m(),e(!0)}catch(t){console.warn("SM - [Ursa Enterprise]",t),e(!1)}}(function(t){if(t){var n=document.getElementById("sm-tracking");if(null!==n){var o=soclHelper.createBaseIframe();o.setAttribute("src",r+"view.min.html?appId="+e.appId+"&id="+e.id+"&gaEnabled="+e.gaEnabled+"&pushNativeEnabled="+e.isPushNativeEnabled+"&smuid="+soclHelper.getQueryStringParams("smuid")+"&v=106&clientId="+e.clientId+"&sessionHash="+e.sessionHash),o.setAttribute("id","sm-tracking-iframe"),o.setAttribute("name","sm-tracking-iframe"),n.appendChild(o)}}}),soclHelper.setStoreValue("smcid",e.id),soclHelper.setStoreValue("smpurl",e.purchaseUrl),function(e){var t=[];e.constructor==String&&(e=JSON.parse(e));for(var n=0;n<e.length;n++)t.push({type:e[n].type.id,rule:e[n].rule.id,value:e[n].value});soclHelper.setStoreValue("smtp",JSON.stringify(t))}(e.tagsParameter)},n.clearInstance=function(){void 0!==o&&o.removeEventListener(v),soclHelper.removeElementById("sm-tracking")}},function(e,t){var n,o,r,i,s,a,c,l,u;window.soclConnect={},n=soclConnect,o=2,r=4,i=1,s=2,a={Type:{Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_Step_ConclusionWithRejection:"Channel.Step.ConclusionWithRejection"},Step:{Empty:"",OS_LightBox_FBConnect:"OS.LightBox.0.FBConnect"}},c=function(e,t,o,r,a){var c=e.split("-").join(""),l=soclHelper.getStoreValue("smid_"+c),u={customerId:e,sourceId:t,facebookId:r,accessToken:o};null!=l&&null!=l&&0!=l&&(u={customerId:e,sourceId:t,facebookId:r,accessToken:o,userPushMessagingId:l});var p=soclHelper.getQueryStringParams("userId");p&&(u.userId=p),postCORS(apiUrl+"/users?format=json",u,function(t){var o=t.response.id;try{if("00000000000000000000000000000000"!==o){u.personId=soclHelper.getStoreValue("smid_"+u.customerId)||o,u.source=u.sourceId,u.channelId=u.channelId||soclHelper.getQueryStringParams("pluginId"),u.device=soclHelper.isMobile()?s:i;var r=soclHelper.extractClientIdFromUrl();r&&(u.clientId=r),u.sessionHash=soclHelper.extractSessionHashFromUrl(),u.sessionHash||(u.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",u,function(e){})}}catch(e){console.log("SM - [URSA] - registerUser - POST Wonka/ursa/profiles. Failed: ".concat(e))}soclHelper.setStoreValue(n.createSMIdKey(soclHelper.replaceAll("-","",e)),o),soclHelper.setStoreValue("soclId",o);var c=soclTracking.createDataObj(o,document.referrer,document.referrer,e);soclTracking.action(c,function(e){!function(e){"none"!=this.returnUri&&void 0!==this.returnUri?window.location=this.returnUri:e(!0)}(function(e){a(e,o)})})})},l=function(e,t){postCORS(apiUrl+"/users/"+e.userId+"?format=json",e,function(n){try{if("00000000000000000000000000000000"!==n.response.id){e.customerId=e.customerId||soclHelper.getQueryStringParams("id"),e.personId=soclHelper.getStoreValue("smid_"+e.customerId)||n.response.id,e.channelId=e.channelId||soclHelper.getQueryStringParams("pluginId"),e.device=soclHelper.isMobile()?s:i;var o=soclHelper.extractClientIdFromUrl();o&&(e.clientId=o),e.sessionHash=soclHelper.extractSessionHashFromUrl(),e.sessionHash||(e.sessionHash=soclHelper.getOrCreateSessionHash()),e.endpoint&&(e.token=e.endpoint),postCORS(wonkaUrl+"/ursa/profiles",e,function(e){t(!0)})}else console.log("SM - [URSA] - updateUser - POST Wonka/ursa/profiles. Failed response from API. Request: ".concat(apiUrl+"/users/"+e.userId+"?format=json")),t(!1)}catch(e){console.log("SM - [URSA] - updateUser - POST Wonka/ursa/profiles. Failed: ".concat(e)),t(!1)}})},u=function(e,t,n){var o=soclHelper.createBaseIframe();o.width=e.getAttribute("data-width"),o.height=e.getAttribute("data-height"),o.setAttribute("src","https://widgets.soclminer.com.br/v2/social/js/widgets/connect/"+t+"/index.html?scope="+e.getAttribute("data-scope")+"&id="+n),e.appendChild(o)},n.generateRndGuid=function(){return uuid.v1()},n.generateRndGuidV4=function(){return uuid.v4()},n.createSMIdKey=function(e){return"smid_"+soclHelper.replaceAll("-","",e)},n.getSMObjIdKey=function(e){return"smObj-"+soclHelper.replaceAll("-","",e)},n.render=function(e){var t=e.featureSettings.folderName,n=document.getElementsByClassName("sm-connect");null!==n&&n.length>0&&function(e,t,n){for(var o=0;o<e.length;o++)u(e[o],t,n)}(n,t,e.id)},n.signIn=function(e,t,o,r,i){this.scope="email,public_profile";var s=soclHelper.getQueryStringParams("pluginId"),l=0;try{var u=document.location.href.split("social/");(u=u[1].split("/"))&&u.length>0&&(l=u[0])}catch(e){console.log("SM - [URSA] - signIn - Failed while spliting URL: ".concat(e))}try{var p={type:a.Type.Channel_Step_View,step:a.Step.OS_LightBox_FBConnect.replace("0",l),channelId:s};p.channelId&&soclBounce.createEventProxy(p)}catch(e){console.log("SM - [URSA] - signIn - Failed while sending event: ".concat(e))}n.fbEnsureInit(function(n){null!==n&&FB.login(function(n){if(n.authResponse){"none"!=r&&(this.returnUri=r);try{n.authResponse.grantedScopes&&(n.authResponse.grantedScopes.includes("email")?(o={type:a.Type.Channel_Step_Conclusion,step:a.Step.OS_LightBox_FBConnect.replace("0",l),channelId:s||soclHelper.getQueryStringParams("pluginId"),customerId:e}).channelId&&soclBounce.createEventProxy(o):(o={type:a.Type.Channel_Step_ConclusionWithRejection,step:a.Step.OS_LightBox_FBConnect.replace("0",l),channelId:s,customerId:e}).channelId&&soclBounce.createEventProxy(o))}catch(e){console.log("SM - [URSA] - fbEnsureInit - Failed while sending event: ".concat(e))}c(e,t,n.authResponse.accessToken,n.authResponse.userID,function(e){i(e)})}else{try{var o;(o={type:a.Type.Channel_Step_Rejection,step:a.Step.OS_LightBox_FBConnect.replace("0",l),channelId:s,customerId:e}).channelId&&soclBounce.createEventProxy(o)}catch(e){console.log("SM - [URSA] - fbEnsureInit - Failed while sending event: ".concat(e))}i(!1)}},{scope:"email,public_profile",return_scopes:!0})})},n.signInWithMail=function(e,t){postCORS(apiUrl+"/users?format=json",e,function(o){var r=o.response.id;try{if("00000000000000000000000000000000"!==r){e.personId=r,e.channelId=e.channelId||soclHelper.getQueryStringParams("pluginId"),e.device=soclHelper.isMobile()?s:i;var a=soclHelper.extractClientIdFromUrl();a&&(e.clientId=a),e.sessionHash=soclHelper.extractSessionHashFromUrl(),e.sessionHash||(e.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",e,function(e){})}}catch(e){console.log("SM - [URSA] - signInWithMail - POST Wonka/ursa/profiles. Failed: ".concat(e))}soclHelper.setStoreValue(n.createSMIdKey(soclHelper.replaceAll("-","",e.customerId)),r),soclHelper.setStoreValue("soclId",r);var c=soclTracking.createDataObj(r,e.url,e.referrer,e.customerId);soclTracking.action(c,function(e){t(e)})})},n.signInOrganic=function(e,t,o,r){if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.email.value)&&t){var a={};a.Email=e.email.value,a.SourceId=o,a.CustomerId=t,e.firstName&&(a.FirstName=e.firstName.value),e.lastName&&(a.LastName=e.lastName.value),e.pictureUrl&&(a.PictureUrl=e.pictureUrl.value),e.gender&&(a.Gender=e.gender.value),e.locale&&(a.Locale=e.locale.value),e.timezone&&(a.Timezone=e.timezone.value),e.phone&&(a.Phone=e.phone.value),postCORS(apiUrl+"/users?format=json",a,function(e){var o=e.response.id;try{if("00000000000000000000000000000000"!==o){a.personId=o,a.device=a.deviceType||null,a.channelId=a.channelId||soclHelper.getQueryStringParams("pluginId"),a.device=soclHelper.isMobile()?s:i;var c=soclHelper.extractClientIdFromUrl();c&&(a.clientId=c),a.sessionHash=soclHelper.extractSessionHashFromUrl(),a.sessionHash||(a.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",a,function(e){})}}catch(e){console.log("SM - [URSA] - signInOrganic - POST Wonka/ursa/profiles. Failed: ".concat(e))}soclHelper.setStoreValue(n.createSMIdKey(soclHelper.replaceAll("-","",t)),o),soclHelper.setStoreValue("soclId",o);var l=soclTracking.createDataObj(o,document.URL,document.referrer,t);soclTracking.action(l,function(e){r()})})}},n.updateOrganic=function(e,t,n,o){if(t&&n){var r={};r.userId=n,r.customerId=t,e.email&&(r.Email=e.email.value),e.firstName&&(r.FirstName=e.firstName.value),e.gender&&(r.Gender=e.gender.value),e.phone&&(r.Phone=e.phone.value),l(r,function(e){o()})}},n.signInWithPush=function(e,t,o,r,a,c){if(o&&!soclHelper.getStoreValue("pushendpoint")){var l=soclHelper.getStoreValue("smid_"+e);l&&!/^[0-9a-f]{8}[0-9a-f]{4}[1-5][0-9a-f]{3}[89ab][0-9a-f]{3}[0-9a-f]{12}$/i.test(l)&&(soclHelper.removeStoreValue("smid_"+e),a(!1));var u={customerId:e,sourceId:t,endpoint:o,deviceType:r},p=soclHelper.getQueryStringParams("userId");p?u.userId=p:l&&0!=l&&(u.userPushMessagingId=l),postCORS(apiUrl+"/users?format=json",u,function(t){var o=t.response.id;try{if("00000000000000000000000000000000"!==o){u.personId=o,u.token=u.endpoint,u.channelId=u.channelId||c,u.device=soclHelper.isMobile()?s:i;var r=soclHelper.extractClientIdFromUrl();r&&(u.clientId=r),u.sessionHash=soclHelper.extractSessionHashFromUrl(),u.sessionHash||(u.sessionHash=soclHelper.getOrCreateSessionHash()),postCORS(wonkaUrl+"/ursa/profiles",u,function(e){})}}catch(e){console.log("SM - [URSA] - signInWithPush - POST Wonka/ursa/profiles. Failed: ".concat(e))}o=t.response.id,soclHelper.setStoreValue(n.createSMIdKey(soclHelper.replaceAll("-","",e)),o),soclHelper.setStoreValue("soclId",o),a(o)})}},n.registerAnonymousUser=function(e,t,o,r){var i=soclHelper.getStoreValue(n.createSMIdKey(soclHelper.replaceAll("-","",e)));null==i&&""==i||postCORS(apiUrl+"/users/"+t+"/anonymous?format=json",{customerId:e,userId:t,isControlGroup:o},function(n){soclHelper.setStoreValue(i,t);var o=soclTracking.createDataObj(t,document.location.href,document.referrer,e);soclTracking.action(o,function(e){r(e)})})},n.registerConnectedUser=function(e,t,o,r,i){e>0?n.getFbCurrentAccessToken(function(n){""!==n?c(t,o,n,e,function(e,t){i(t)}):i(!1)}):i(!1)},n.updateConnectedUser=function(e,t){l(e,function(e){t(e)})},n.getGuidPersonId=function(e,t){getCORS(wonkaUrl+"/ursa/profiles/base32/from/"+e,null,function(e){t(e.value)})},n.userExists=function(e,t){n.getFbId(function(n){n>0?getCORS(apiUrl+"/users/social/"+n+"/?format=json&customerId="+e,null,function(e){"00000000000000000000000000000000"!==e.response.id?t(!0):t(!1)}):t(!1)})},n.getId=function(e,t){var r=soclHelper.getStoreValue(n.createSMIdKey(e));null!==r&&""!==r?t(r):setTimeout(function(){--o>0?n.getId(e,t):t(0)},1e3)},n.getStatus=function(e){n.fbEnsureInit(function(t){null!==t&&FB.getLoginStatus(function(t){"connected"===t.status?e(!0):(t.status,e(!1))})})},n.getFbCurrentAccessToken=function(e){n.fbEnsureInit(function(t){null!==t&&FB.getLoginStatus(function(t){"connected"===t.status?e(t.authResponse.accessToken):e("")})})},n.getFbId=function(e){n.fbEnsureInit(function(t){null!==t?FB.getLoginStatus(function(t){"connected"===t.status?e(t.authResponse.userID):e(0)}):e(0)})},n.getFbPermissions=function(e){n.fbEnsureInit(function(t){null!==t&&FB.api("/me/permissions",function(t){e(t)})})},n.fbEnsureInit=function(e){window.fbApiInit?e&&e():setTimeout(function(){--r>0?n.fbEnsureInit(e):e(null)},1e3)},n.fbSettings=function(e,t){var n,o,r,i,s;"undefined"==e&&(e=void 0),e&&(this.appId=e,this.channelUrl=t,window.fbAsyncInit=function(){FB.init({appId:e,channelUrl:void 0,status:!0,cookie:!0,xfbml:!0,version:"v2.12"}),fbApiInit=!0},n=document,o="script",r="facebook-jssdk",s=n.getElementsByTagName(o)[0],n.getElementById(r)||((i=n.createElement(o)).id=r,i.src="//connect.facebook.net/en_US/sdk.js",s.parentNode.insertBefore(i,s)),function(){if(!document.getElementById("fb-root")){var e=document.createElement("div");e.id="fb-root",document.body.insertBefore(e,document.body.childNodes[0])}}())}},function(e,t){var n,o,r,i;window.socl={},n=socl,o=20,r=function(e){if(void 0!==e.paramOnSession&&""!==e.paramOnSession){var t=soclHelper.getSessionValue("paramOnSession");null!==t&&""!==t?t+="|"+e.paramOnSession:t=e.paramOnSession,soclHelper.setSessionValue("paramOnSession",t)}},i={Presales_Impact:"Presales.Impact"},n.inject=function(e){var t,n=document.getElementsByTagName("script")[0];(t=document.createElement("script")).src=e,n.parentNode.insertBefore(t,n)},n.execute=function(){this.apiUrl="https://"+soclHelper.getEnvironment()+"api.soclminer.com.br/v2.1",setTimeout(function(){if(o--,"undefined"!=typeof soclTracking)window.soclInit();else{if(!(o>0))return;n.execute()}},2e3)},n.emmit={onView:function(e){e.event="view",n.onView&&n.onView(e)},onClick:function(e){e.event="click",n.onClick&&n.onClick(e)},onClose:function(e){e.event="close",n.onClose&&n.onClose(e)},onEvent:function(e){n.onEvent&&n.onEvent(e)}},n.refresh=function(e){e&&(soclPush.clearInstance(),soclBounce.clearInstance(),soclOnsiteSales.clearInstance(),soclTracking.clearInstance(),soclHelper.removeAddonJs(),soclHelper.setIsSPA(),n.start(e))},n.start=function(e){if(e&&!function(e){return!!(window.socl_BlackList&&window.socl_BlackList.indexOf(e)>-1)}(e)){this.apiUrl="https://"+soclHelper.getEnvironment()+"api.soclminer.com.br/v2.1";var t=soclHelper.getStoreValue(soclConnect.createSMIdKey(e));if(t&&!soclHelper.guidValidation(t)){var n=soclHelper.replaceAll("-","",e);soclHelper.removeStoreValue(soclConnect.createSMIdKey(e)),soclHelper.removeStoreValue("smpushoptin_"+n),soclHelper.removeStoreValue(n)}if(soclHelper.existsUrlWithPersonId()&&!t){var o=soclHelper.getPersonIdFromUrl();if(!o)return;soclConnect.getGuidPersonId(o,function(t){if(t){var n=soclHelper.replaceAll("-","",t);soclHelper.setStoreValue(soclConnect.createSMIdKey(e),n)}})}soclHelper.addOrGetEvent(e,"sm_event_impact",null);var s=soclHelper.getOrCreateSMObj(e),a=soclHelper.getOrCreateSessionHash(e),c=encodeURIComponent(document.location.href);soclHelper.getCustomerInfo(e,c,function(n){if(void 0!==n.response){var o={id:n.response.id,appId:n.response.appId,name:n.response.name,dns:n.response.customDNS,forceRedirect:n.response.forceRedirect,gaEnabled:n.response.gaEnabled,cgActive:n.response.cgActive,purchaseUrl:n.response.purchaseUrl,pageId:n.response.facebookPageId,featureSettings:{folderName:"",pluginParameters:"",pluginTypeId:"",pluginId:"",version:"",startDate:"",endDate:""},isPushNativeEnabled:!1,timeInSite:0,googleApp:2,sendAnonymousData:n.response.sendAnonymousData,baseSizePercent:n.response.baseSizePercent,features:n.response.features};o.clientId=s.clientId,o.sessionHash=a,soclHelper.setCustomerInfoToLocalStorage(o);var c=n.response.features.find(function(e){return"f4456763b8cb412a9e5cf2a11f2b6222"==e.feature.id});if(c&&5===c.pluginTypeId){var l=JSON.parse(c.pluginParameters);o.isPushNativeEnabled=l.native,o.googleApplicationId=l.GoogleAppTypeId,o.daysToShowAfterView=l.daysToShowAfterView,o.timeInSite=l.TimeInSite,o.googleApplicationId&&(o.googleApp=o.googleApplicationId)}soclHelper.removeSessionValue("paramOnSession");for(var u=0;u<n.response.features.length;u++)switch(o.featureSettings={folderName:n.response.features[u].folderName,pluginTypeId:"",pluginId:"",version:"",startDate:"",endDate:""},n.response.features[u].feature.id){case"ce48903b935c436f8c696585e8df1f36":var p=soclHelper.replaceAll("-","",e),d=soclHelper.replaceAll("{0}",p,"logs_{0}");soclTracking.createLogDB(d),soclTracking.createEventDB("events_"+p);try{var f=document.location.href,g=document.location.search.substr(1),h=soclHelper.urlContainsSpecificParams(g);if(h){h.create_date=soclHelper.getNow(),h.path=window.location.pathname;var m=soclHelper.addOrGetEvent(e,"sm_event_impact",h);if(soclHelper.setLocalStorageValue("sm_event_impact",JSON.stringify(m)),"smid"in h){var v={type:i.Presales_Impact,additionalData:{Impact:m,Sale:{}}};soclHelper.createEvent(v)}}}catch(e){console.log("SM - Failed on getting URL query string params.",f)}try{soclHelper.sendEvents(p)}catch(e){console.log("SM - Failed on sending events.",e)}soclHelper.injectCrawler(e,function(){var n={url:document.location.href,referrer:document.referrer,date:soclHelper.getNow(),metadata:soclHelper.getMetadata(),sessionHash:soclHelper.getSessionHash(),clientId:s.clientId};if(soclTracking.insertLogItem(d,n),!t&&o.sendAnonymousData&&soclHelper.isInControlGroup(s.randomNumber,o.baseSizePercent))try{soclHelper.postBehaviors(e,s.clientId)}catch(e){console.log(e)}}),o.tagsParameter=n.response.tagsParameter,soclTracking.init(o);break;case"f4456763b8cb412a9e5cf2a11f2b6222":case"6fb5edd41bda496593802a9d0acf8595":var y=n.response.features[u];r(y);var S=JSON.parse(JSON.stringify(o));if(y.pluginId)S.featureSettings.pluginTypeId=y.pluginTypeId,S.featureSettings.pluginId=y.pluginId,S.featureSettings.version=y.version,S.timeInSite>0?setTimeout(function(){soclPush.render(S)},1e3*S.timeInSite):soclPush.render(S);else{soclHelper.injectDiv("sm-push-tracking","none");var I=document.getElementById("sm-push-tracking");soclHelper.hasPushOptInBy(S.id,function(e){soclPush.createPushTrackingIFrame(S,e,I)})}break;case"89981d318e7f4fa9bf267e5498ac6688":if(r(n.response.features[u]),n.response.features[u].pluginId&&o.appId){o.featureSettings.pluginTypeId=n.response.features[u].pluginTypeId,o.featureSettings.pluginId=n.response.features[u].pluginId,o.featureSettings.version=n.response.features[u].version,o.featureSettings.pluginParameters=n.response.features[u].pluginParameters,o.featureSettings.storyId=n.response.features[u].storyId;var w=parseInt(soclHelper.getSessionValue("pagesview_"+o.featureSettings.pluginId));isNaN(w)?soclHelper.setSessionValue("pagesview_"+o.featureSettings.pluginId,1):(w+=1,soclHelper.setSessionValue("pagesview_"+o.featureSettings.pluginId,w)),soclBounce.render(JSON.parse(JSON.stringify(o)))}break;case"3f1df6d723414bb9bc2e23ccb33e8d8b":r(n.response.features[u]),n.response.features[u].pluginId&&(o.featureSettings.pluginTypeId=n.response.features[u].pluginTypeId,o.featureSettings.pluginId=n.response.features[u].pluginId,o.featureSettings.version=n.response.features[u].version),soclOnSite.render(JSON.parse(JSON.stringify(o)));break;case"5491c86eda73474a907c6e4adb18ee99":if(r(n.response.features[u]),n.response.features[u].pluginId){var b=n.response.features[u];o.featureSettings.pluginTypeId=b.pluginTypeId,o.featureSettings.pluginId=b.pluginId,o.featureSettings.version=b.version,o.featureSettings.pluginParameters=soclHelper.formatUrlPipe(b.pluginParameters),o.featureSettings.startDate=b.startDate,o.featureSettings.endDate=b.endDate,w=parseInt(soclHelper.getSessionValue("pagesview_"+o.featureSettings.pluginId)),isNaN(w)?soclHelper.setSessionValue("pagesview_"+o.featureSettings.pluginId,1):(w+=1,soclHelper.setSessionValue("pagesview_"+o.featureSettings.pluginId,w))}soclOnsiteSales.render(JSON.parse(JSON.stringify(o)))}soclOrganicScript()}})}},function(e){this.apiUrl="https://"+soclHelper.getEnvironment()+"api.soclminer.com.br/v2.1",this.wonkaUrl="https://"+soclHelper.getEnvironment()+"wonka.socialminer.com",socl.execute()}(document)},function(e,t){!function(e,t){"use strict";var n=!1,o=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,r=function(){};r.extend=function(e){var t=this.prototype;n=!0;var i=new this;for(var s in n=!1,e)i[s]="function"==typeof e[s]&&"function"==typeof t[s]&&o.test(e[s])?function(e,n){return function(){var o=this._super;this._super=t[e];var r=n.apply(this,arguments);return this._super=o,r}}(s,e[s]):e[s];function a(){!n&&this.init&&this.init.apply(this,arguments)}return a.prototype=i,a.prototype.constructor=a,a.extend=r.extend,a};var i={debug:!1,trace:function(t){this.debug&&void 0!==e.console&&e.console.log("Porthole: "+t)},error:function(t){void 0!==typeof e.console&&"function"==typeof e.console.error&&e.console.error("Porthole: "+t)},WindowProxy:function(){}};i.WindowProxy.prototype={post:function(e,t){},addEventListener:function(e){},removeEventListener:function(e){}},i.WindowProxyBase=r.extend({init:function(t){void 0===t&&(t=""),this.targetWindowName=t,this.origin=e.location.protocol+"//"+e.location.host,this.eventListeners=[]},getTargetWindowName:function(){return this.targetWindowName},getOrigin:function(){return this.origin},getTargetWindow:function(){return i.WindowProxy.getTargetWindow(this.targetWindowName)},post:function(t,n){void 0===n&&(n="*"),this.dispatchMessage({data:t,sourceOrigin:this.getOrigin(),targetOrigin:n,sourceWindowName:e.name,targetWindowName:this.getTargetWindowName()})},addEventListener:function(e){return this.eventListeners.push(e),e},removeEventListener:function(e){var t;try{t=this.eventListeners.indexOf(e),this.eventListeners.splice(t,1)}catch(e){this.eventListeners=[]}},dispatchEvent:function(e){var t;for(t=0;t<this.eventListeners.length;t++)try{this.eventListeners[t](e)}catch(e){i.error(e)}}}),i.WindowProxyLegacy=i.WindowProxyBase.extend({init:function(e,t){this._super(t),null!==e?(this.proxyIFrameName=this.targetWindowName+"ProxyIFrame",this.proxyIFrameLocation=e,this.proxyIFrameElement=this.createIFrameProxy()):(this.proxyIFrameElement=null,i.trace("proxyIFrameUrl is null, window will be a receiver only"),this.post=function(){throw new Error("Receiver only window")})},createIFrameProxy:function(){var e=document.createElement("iframe");return e.setAttribute("id",this.proxyIFrameName),e.setAttribute("name",this.proxyIFrameName),e.setAttribute("src",this.proxyIFrameLocation),e.setAttribute("frameBorder","1"),e.setAttribute("scrolling","auto"),e.setAttribute("width",30),e.setAttribute("height",30),e.setAttribute("style","position: absolute; left: -100px; top:0px;"),e.style.setAttribute&&e.style.setAttribute("cssText","position: absolute; left: -100px; top:0px;"),document.body.appendChild(e),e},dispatchMessage:function(t){var n=e.encodeURIComponent;if(this.proxyIFrameElement){var o=this.proxyIFrameLocation+"#"+n(i.WindowProxy.serialize(t));this.proxyIFrameElement.setAttribute("src",o),this.proxyIFrameElement.height=this.proxyIFrameElement.height>50?50:100}}}),i.WindowProxyHTML5=i.WindowProxyBase.extend({init:function(e,t){this._super(t),this.eventListenerCallback=null},dispatchMessage:function(e){this.getTargetWindow().postMessage(i.WindowProxy.serialize(e),e.targetOrigin)},addEventListener:function(t){if(0===this.eventListeners.length){var n=this;e.addEventListener?(this.eventListenerCallback=function(e){n.eventListener(n,e)},e.addEventListener("message",this.eventListenerCallback,!1)):e.attachEvent&&(this.eventListenerCallback=function(t){n.eventListener(n,e.event)},e.attachEvent("onmessage",this.eventListenerCallback))}return this._super(t)},removeEventListener:function(t){this._super(t),0===this.eventListeners.length&&(e.removeEventListener?e.removeEventListener("message",this.eventListenerCallback):e.detachEvent&&(void 0===e.onmessage&&(e.onmessage=null),e.detachEvent("onmessage",this.eventListenerCallback)),this.eventListenerCallback=null)},eventListener:function(e,t){var n=i.WindowProxy.unserialize(t.data);!n||""!==e.targetWindowName&&n.sourceWindowName!=e.targetWindowName||e.dispatchEvent(new i.MessageEvent(n.data,t.origin,e))}}),e.postMessage?(i.trace("Using built-in browser support"),i.WindowProxy=i.WindowProxyHTML5.extend({})):(i.trace("Using legacy browser support"),i.WindowProxy=i.WindowProxyLegacy.extend({})),i.WindowProxy.serialize=function(e){if("undefined"==typeof JSON)throw new Error("Porthole serialization depends on JSON!");return JSON.stringify(e)},i.WindowProxy.unserialize=function(e){if("undefined"==typeof JSON)throw new Error("Porthole unserialization dependens on JSON!");try{var t=JSON.parse(e)}catch(e){return!1}return t},i.WindowProxy.getTargetWindow=function(t){return""===t?parent:"top"===t||"parent"===t?e[t]:e.frames[t]},i.MessageEvent=function(e,t,n){this.data=e,this.origin=t,this.source=n},i.WindowProxyDispatcher={forwardMessageEvent:function(t){var n,o,r,s=e.decodeURIComponent;document.location.hash.length>0&&(n=i.WindowProxy.unserialize(s(document.location.hash.substr(1))),o=i.WindowProxy.getTargetWindow(n.targetWindowName),(r=i.WindowProxyDispatcher.findWindowProxyObjectInWindow(o,n.sourceWindowName))?r.origin===n.targetOrigin||"*"===n.targetOrigin?r.dispatchEvent(new i.MessageEvent(n.data,n.sourceOrigin,r)):i.error("Target origin "+r.origin+" does not match desired target of "+n.targetOrigin):i.error("Could not find window proxy object on the target window"))},findWindowProxyObjectInWindow:function(e,t){var n;if(e)for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))try{if(null!==e[n]&&"object"==typeof e[n]&&e[n]instanceof e.Porthole.WindowProxy&&e[n].getTargetWindowName()===t)return e[n]}catch(e){}return null},start:function(){e.addEventListener?e.addEventListener("resize",i.WindowProxyDispatcher.forwardMessageEvent,!1):e.attachEvent&&"undefined"!==e.postMessage?e.attachEvent("onresize",i.WindowProxyDispatcher.forwardMessageEvent):document.body.attachEvent?e.attachEvent("onresize",i.WindowProxyDispatcher.forwardMessageEvent):i.error("Cannot attach resize event")}},e.soclPorthole=i}("undefined"!=typeof window?window:this)},function(e,t){function n(e,t){var n=new XMLHttpRequest;try{return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n}catch(e){}}function o(e){var t="";for(key in e)t=t+"&"+key+"="+e[key];return t=t.substr(1,t.length)}function r(e){return soclHelper.guidValidation(soclHelper.replaceAll("-","",e))}window.getCORS=function(e,t,o){var r=n("GET",e);r&&(r.onreadystatechange=function(){4==r.readyState&&""!==r.responseText&&o(JSON.parse(r.responseText),"success")},r.onerror=function(){},r.send())},window.postCORS=function(e,t,r){var i=n("POST",e);i&&(i.onreadystatechange=function(){4==i.readyState&&""!==i.responseText&&r(JSON.parse(i.responseText),"success")},i.onerror=function(){},params=o(t),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(params))};var i=function(e){return!(e&&!r(e))},s=function(e){return!!(e.type&&r(e.customerId)&&i(e.personId)&&i(e.channelId)&&i(e.clientId))||(console.error("invalid event"),console.log(e),!1)},a=function(e){return!!(i(e.customerId)&&i(e.personId)&&i(e.clientId))||(console.error("invalid behavior"),console.log(e),!1)};window.postJsonCORS=function(e,t,o){if(t&&(t.events&&t.events.length||t.behaviors&&t.behaviors.length)){if(t.events)for(var r=0;r<t.events.length;r++){var i=t.events[r];if(!s(i))return}if(t.behaviors)for(r=0;r<t.behaviors.length;r++){var c=t.behaviors[r];if(!a(c))return}var l=n("POST",e);l&&(l.onreadystatechange=function(){4==l.readyState&&""!==l.responseText&&o&&o(JSON.parse(l.responseText),"success")},l.onerror=function(){},l.setRequestHeader("Content-type","application/json;charset=UTF-8"),l.send(JSON.stringify(t).replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"')))}},window.putCORS=function(e,t,r){var i=n("PUT",e);i&&(i.onreadystatechange=function(){4==i.readyState&&""!==i.responseText&&r(JSON.parse(i.responseText),"success")},i.onerror=function(){},params=o(t),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(params))},window.deleteCORS=function(e,t,r){var i=n("DELETE",e);i&&(i.onreadystatechange=function(){4==i.readyState&&r(JSON.parse(i.responseText),"success")},i.onerror=function(){},params=o(t),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(params))}},function(e,t){var n;window.soclPerfCounter={},(n=soclPerfCounter).type={Click:1,View:2,Impression:3,PushBlocked:7,PushErrorWhileGetToken:8},n.event=function(e,t,o,r){var i={pluginId:e,actionTypeId:t,pluginTypeId:o,customerId:r};!function(e,t){postCORS(apiUrl+"/plugins/"+e.pluginId+"/performance/"+e.actionTypeId+"?format=json",{pluginTypeId:e.pluginTypeId,customerId:e.customerId},function(e){t(!0)})}(i,function(e){}),t===n.type.Click&&function(e,t){postCORS(apiUrl+"/plugins/"+e.pluginId+"/performance/abtest?format=json",{pluginTypeId:e.pluginTypeId,customerId:e.customerId},function(e){t(!0)})}(i,function(e){})}},function(e,t){window.soclBounce={},function(e){Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var t,n,o,r,s,a,c,l=10,u=null,p={Type:{Channel_View:"Channel.View",Channel_Conclusion:"Channel.Conclusion",Channel_Rejection:"Channel.Rejection",Channel_Suppression:"Channel.Suppression",Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_Step_ConclusionWithRejection:"Channel.Step.ConclusionWithRejection",Channel_ConclusionWithRejection:"Channel.ConclusionWithRejection"},Step:{Empty:"",OS_LightBox:"OS.LightBox.0",OS_LightBox_Email:"OS.LightBox.0.Email",OS_LightBox_FBConnect:"OS.LightBox.0.FBConnect"}},d=!1,f=0,g="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/client/{CID}/social/{PTID}/{PID}",h="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/css/",m=1,v=10,y=11,S=12,I=13,w=14,b=15,_=0,C=7,E=1,O=!1,P=function(){(u=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-lightBox-iframe")).addEventListener(x)},x=function(e){if("on"==e.data.activeBounce){var t=document.getElementById("sm-bounce");null!=t&&k(t)}if("on"==e.data.closeAndRedirect&&soclHelper.getCloseUrl(function(e){if(""!==e){try{var t=[];for(t.push({type:p.Type.Channel_ConclusionWithRejection,step:p.Step.OS_LightBox,channelId:n}),i=0;i<t.length;i++)t[i].channelId&&soclHelper.createEvent(t[i])}catch(e){console.log(e)}soclBounce.closeBox(!1,"2"),window.location.href=e}else soclBounce.closeBox(!1,"2")}),"on"==e.data.close)if(null!==soclHelper.getSessionValue("controlGroupActive")&&""!==soclHelper.getSessionValue("controlGroupActive"))soclHelper.getCID(function(e){soclConnect.registerAnonymousUser(e,soclConnect.generateRndGuid(),!1,function(e){soclHelper.setStoreValue("smanonymous",JSON.stringify({IsControlGroup:!1,Active:e})),soclBounce.closeBox(!0,"1")})});else{try{(s={type:p.Type.Channel_Rejection,step:p.Step.OS_LightBox,channelId:n}).channelId&&soclHelper.createEvent(s)}catch(e){console.log(e)}soclBounce.closeBox(!1,"1")}if(void 0!==e.data.userConnected&&soclHelper.setStoreValue(e.data.userConnected,"connected"),void 0!==e.data.click&&(soclCookie.createCookie("smClickBounce",!0,3),soclHelper.setStoreValue("smInteractBounce_"+r,!0),socl.emmit.onClick({id:n,type:"bounce-1"})),"on"==e.data.concluded){soclHelper.getRedirectUrl(function(e){socl.emmit.onClick({id:n,type:"bounce-2"}),window.location.href=e});try{var o=[];for(o.push({type:p.Type.Channel_Conclusion,step:p.Step.OS_LightBox,channelId:n}),i=0;i<o.length;i++)o[i].channelId&&soclHelper.createEvent(o[i])}catch(e){console.log(e)}}if(void 0!==e.data.loaded&&H(e.data.loaded,1e3),void 0!==e.data.createEvent)try{var s;(s=e.data.createEvent).channelId&&soclHelper.createEvent(s)}catch(e){console.log(e)}},H=function(e,o){if(f<o){f=o;var r=[];"on"!==e&&r.push(encodeURIComponent(e)),d&&r.push(encodeURIComponent(document.location.href)),soclHelper.formatUrlBy(n,t,r,function(t){var n=0;"on"!==e&&soclHelper.setStoreValue("smredirecturl",t.url[n++]),d&&soclHelper.setStoreValue("smcloseurl",t.url[n++])})}},k=function(e){var i,u=soclHelper.getStoreValue("smViewBounce_"+r);if(soclHelper.isMobile()||c.DeviceType!=C){c.DeviceType==_||isNaN(c.DeviceType)||!isNaN(u)&&(u<c.PluginViewBefore||soclHelper.getStoreValue("smInteractBounce_"+r))?i=e.getAttribute("daysToExpire"):(i=soclHelper.convertMS(c.TimeToShowIfNoHaveInteraction).decimalDay,soclHelper.removeStoreValue("smViewBounce_"+r),soclHelper.removeStoreValue("smInteractBounce_"+r)),null==i&&(i=3);var d=window.setInterval(function(){try{if("undefined"!=typeof soclOuibounce){window.clearInterval(d);var a={};a.create_date=soclHelper.getNow(),a.path=window.location.pathname,a.smid="4-10",s=soclOuibounce(e,{displayBounce:c.DisplayType!=E,sensitivity:20,cookieExpire:i,timer:500,delay:200,sitewide:!0,cookieName:"viewedOuibounceModal_"+r,callback:function(){if(document.getElementById("sm-bounce")){screen.height<600&&window.scrollTo(0,0),null!==document.getElementById("sm-onsite")&&document.getElementById("sm-onsite").SoclRemoveTag(),null!==document.getElementById("sm-push")&&"block"==window.getComputedStyle(document.getElementById("sm-push")).display&&(document.getElementById("sm-push").style.display="none",O=!0),soclHelper.computePluginHit(soclPerfCounter.type.View,t),isNaN(u)?soclHelper.setStoreValue("smViewBounce_"+r,1):(u+=1,soclHelper.setStoreValue("smViewBounce_"+r,u)),soclCookie.createCookie("smViewBounce",!0,i),a.kind="view";var e=soclHelper.addOrGetEvent(o,"sm_views",a);soclHelper.setLocalStorageValue("sm_views",JSON.stringify(e));try{var s={type:p.Type.Channel_View,step:p.Step.OS_LightBox,channelId:n};s.channelId&&soclHelper.createEvent(s)}catch(e){console.log(e)}socl.emmit.onView({id:n,type:"bounce"}),!0}else soclCookie.createCookie("viewedOuibounceModal_"+r,null,0)},onBeforeShow:function(){var e=!1;if(soclCookie.getCookie("smViewBounce"))e=!0;else if(soclHelper.isInSuppressionGroup(o,n)){soclCookie.createCookie("smViewBounce",!0,i),a.kind="suppression";var t=soclHelper.addOrGetEvent(o,"sm_views",a);soclHelper.setLocalStorageValue("sm_views",JSON.stringify(t));try{e=!0;var r={type:p.Type.Channel_Suppression,step:p.Step.OS_LightBox,channelId:n};soclHelper.createEvent(r)}catch(e){console.log(e)}}return e}})}else 0==--l&&window.clearInterval(d)}catch(e){}},1e3);(soclHelper.isMobile()&&c.DeviceType==C&&soclHelper.getSessionValue("pagesview_"+n)>=c.PagesViewBefore||c.DisplayType==E&&soclHelper.getSessionValue("pagesview_"+n)>=c.PagesViewBefore)&&(c.ScrollPercentage>0&&document.addEventListener("scroll",T),c.TimeInSite>0&&(a=window.setTimeout(function(){soclCookie.getCookie("viewedOuibounceModal_"+r)||void 0===s||s.fire()},c.TimeInSite)))}},T=function(e){soclCookie.getCookie("viewedOuibounceModal_"+r)||void 0===s||parseInt(soclHelper.getPosition())>=parseInt(c.ScrollPercentage)&&s.fire()},A=function(e){soclHelper.injectDiv("sm-bounce","none");var i=document.getElementById("sm-bounce");soclHelper.showPlugin(e.id,r,function(s){if(s)soclHelper.userInControlGroup(e,function(s){s?soclConnect.registerAnonymousUser(e.id,soclConnect.generateRndGuid(),!0,function(e){soclHelper.setStoreValue("smanonymous",JSON.stringify({IsControlGroup:!0,Active:e}))}):function(e,t){p.Step.OS_LightBox=p.Step.OS_LightBox.replace("0",e),p.Step.OS_LightBox_Email=p.Step.OS_LightBox_Email.replace("0",e),p.Step.OS_LightBox_FBConnect=p.Step.OS_LightBox_FBConnect.replace("0",e),e===m?soclHelper.injectCSS(h,"socialbounce.min.css"):e===v||e===y?soclHelper.injectCSS(h,"bounce-survey.min.css"):e===S||e===I||e===w||e===b?soclHelper.injectCSS(h,"plugin-lightbox.min.css"):e===w||e===b?soclHelper.injectCSS(h,"plugin-lightbox.min.css"):soclHelper.injectCSS(h,"bounce-image.min.css");try{P(),t(!0)}catch(e){console.warn("SM - [Ursa Enterprise]",e),t(!1)}}(t=e.featureSettings.pluginTypeId,function(s){if(s){if(n=e.featureSettings.pluginId,o=e.id,r=e.featureSettings.storyId,d=e.forceRedirect,g=soclHelper.replaceAll("{CID}",soclHelper.toGUID(e.id),g),g=soclHelper.replaceAll("{PTID}",t,g),g=soclHelper.replaceAll("{PID}",e.featureSettings.pluginId,g),i.innerHTML=function(e,t){var n='<iframe src="'+g+"/index.html?scope=&id="+e.id+"&pluginId="+e.featureSettings.pluginId+"&gaEnabled="+e.gaEnabled+"&version="+e.featureSettings.version+"&clientId="+e.clientId+"&sessionHash="+e.sessionHash+soclHelper.getSMIDToIFrameSrc(e.id)+'" name="social-lightBox-iframe" scrolling="no" frameborder="0" allowtransparency="true" id="social-lightBox-iframe"></iframe>';return e.featureSettings.pluginTypeId===m?'<div id="SocialLightbox">'+n+'</div><div id="SocialLightboxBlock"></div>':e.featureSettings.pluginTypeId===v||e.featureSettings.pluginTypeId===y?'<div id="BounceSurveyBox">'+n+'</div><div id="BounceSurvey"></div>':e.featureSettings.pluginTypeId===S?'<div id="LightBoxTextBox">'+n+'</div><div id="LightBoxText"></div>':e.featureSettings.pluginTypeId===I?'<div id="LightBoxImageBox">'+n+'</div><div id="LightBoxImage"></div>':e.featureSettings.pluginTypeId===w?'<div id="LightBoxTextBox">'+n+'</div><div id="LightBoxText"></div>':e.featureSettings.pluginTypeId===b?'<div id="LightBoxImageBox">'+n+'</div><div id="LightBoxImage"></div>':'<div id="BounceImageBox1">'+n+'</div><div id="BounceImageBlock1" style="display: block;"></div>'}(e),null!=(c=e.featureSettings.pluginParameters)){c=JSON.parse(c);var a=soclHelper.convertMS(c.TimeToShowAfterClose);i.setAttribute("daysToExpire",a.decimalDay)}soclHelper.setStoreValue("smpid_"+t,e.featureSettings.pluginId),setTimeout(function(){H("on",1)},7e3)}})});else{var a=JSON.parse(soclHelper.getStoreValue("smanonymous"));null===a||""===a||e.cgActive||(a.Active?(a.Active=!1,soclHelper.setStoreValue("smanonymous",JSON.stringify(a)),soclHelper.removeSessionValue("controlGroupActive")):(soclHelper.removeStoreValue("smanonymous"),soclHelper.removeStoreValue(soclConnect.createSMIdKey(e.id))))}})};e.closeBox=function(e,t){if(null!==document.getElementById("sm-bounce")){var o="bounce";"undefined"!=t&&null!=t&&""!=t&&(o+="-"+t),document.getElementById("sm-bounce").SoclRemoveTag(),e||(socl.emmit.onClose({id:n,type:o}),soclCookie.createCookie("smCloseBounce",!0,3),soclHelper.setStoreValue("smInteractBounce",!0)),O&&null!==document.getElementById("sm-push")&&"2"!=t&&(document.getElementById("sm-push").style.display="block",O=!1)}},e.addKeydownEvent=function(){document.onkeydown=function(t){27==(t=t||window.event).keyCode&&e.closeBox(!1,"escape")}},e.render=function(e){navigator.cookieEnabled&&A(e)},e.createEventProxy=function(e){windowProxy.post({createEvent:e})},e.clearInstance=function(){u&&u.removeEventListener(x),a&&clearTimeout(a),s&&s.destroy(),document.removeEventListener("scroll",T),soclHelper.removeElementById("sm-bounce")}}(soclBounce)},function(e,t,n){(function(e){window.soclPush={},function(t){Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var n=null,o=null,r={Ping_PushProfile:"Ping.PushProfile",Channel_View:"Channel.View",Channel_Conclusion:"Channel.Conclusion",Channel_Rejection:"Channel.Rejection",Channel_Suppression:"Channel.Suppression",Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_ConclusionWithRejection:"Channel.ConclusionWithRejection"},i={Empty:"",OS_Notification:"OS.Notification"};t.PUSH_TOKEN_VERIFIED={NAME:"smPushTokenVerified",VALUE:!0,DAYS_TO_EXPIRE:1/24};var s=1,a=1,c=2,l="smViewPushOptin",u="smClickPushOptin",p="smClosePushOptin";t.index_db_name="fcm_token_details_db";var d="",f="https://{DNS}.soclminer.com.br/{PID}/",g="https://{DNS}.soclminer.com.br/00000000000000000000000000000000/",h="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/",m="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/css/",v=function(){(n=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-push")).addEventListener(y)},y=function(e){var t=document.getElementById("sm-push")||document.getElementById("sm-push-tracking");if(null!==t){if(void 0!==e.data.hasOptin){var n=e.data.customerId,o=e.data.endpoint;soclConnect.getId(n,function(e){0===e&&soclTracking.setSMIdByPushOrganic(n,o,function(e){}),soclHelper.setStoreValue("smpushoptin_"+n,"true")})}if(void 0!==e.data.show){var s=(S=e.data.show.split("|"))[0],a=S[1],c=(n=S[2],S[3]);t.setAttribute("class","socl-"+a);var d=soclCookie.getCookie(l),f=soclCookie.getCookie(p);if(!d&&!f){var g={};g.create_date=soclHelper.getNow(),g.path=window.location.pathname;var h=appConfig.IsMobile()?"17":"18";if(g.smid="8-".concat(h),soclHelper.isInSuppressionGroup(n,c)){soclCookie.createCookie(l,!0,s),g.kind="suppression";try{var m={type:r.Channel_Suppression,step:i.OS_Notification,channelId:c};soclHelper.createEvent(m)}catch(e){console.log(e)}}else{t.style.display="",soclPerfCounter.event(c,soclPerfCounter.type.Impression,5,n),soclCookie.createCookie(l,!0,s),socl.emmit.onView({id:c,type:"push-optin"}),g.kind="view";try{(m={type:r.Channel_View,step:i.OS_Notification,channelId:c}).channelId&&soclHelper.createEvent(m)}catch(e){console.log(e)}}var v=soclHelper.addOrGetEvent(n,"sm_views",g);soclHelper.setLocalStorageValue("sm_views",JSON.stringify(v))}}if(void 0!==e.data.close){var y=e.data.close;c=e.data.pluginId;soclCookie.createCookie(p,!0,y),socl.emmit.onClose({id:c,type:"push-optin"}),soclPush.closeMessage();try{(m={type:r.Channel_Rejection,step:i.OS_Notification,channelId:c}).channelId&&soclHelper.createEvent(m)}catch(e){console.log(e)}}if(void 0!==e.data.click){y=e.data.click,c=e.data.pluginId;soclCookie.createCookie(p,!0,y),soclCookie.createCookie(u,!0,y),socl.emmit.onClick({id:c,type:"push-optin"}),soclPush.closeMessage();try{(m={type:r.Channel_Step_Conclusion,step:i.OS_Notification,channelId:c}).channelId&&soclHelper.createEvent(m)}catch(e){console.log(e)}}if(void 0!==e.data.closeBounce&&soclPush.closeBounceMessage(),void 0!==e.data.closeOnsite&&soclPush.closeOnSiteMessage(),void 0!==e.data.identifier){n=(S=e.data.identifier.split("|"))[0];var S,I=S[1];soclConnect.getId(n,function(e){0===e&&soclHelper.setStoreValue(soclConnect.createSMIdKey(n),I)})}if(void 0!==e.data.createEvent)try{((m=e.data.createEvent).channelId||m.byPassChannel)&&soclHelper.createEvent(m)}catch(e){console.log(e)}}},S=function(e,t,n,o,r){return{userId:e,customerId:t,endpoint:n,allowPushMessaging:o,isRefreshToken:r,deviceType:soclHelper.isMobile()?c:a}},I=function(e,t,n){f=soclHelper.replaceAll("{DNS}",e.dns,f),f=soclHelper.replaceAll("{PID}",e.featureSettings.pluginId,f);var o=soclHelper.createBaseIframe();o.setAttribute("src",f+"index.min.html?appId="+e.appId+"&id="+e.id+"&name="+encodeURIComponent(e.name)+"&pluginId="+e.featureSettings.pluginId+"&version="+e.featureSettings.version+"&dns="+e.dns+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(f)+"&hasOptIn="+t+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+e.gaEnabled+"&googleApp="+e.googleApp+"&clientId="+e.clientId+"&sessionHash="+e.sessionHash+soclHelper.getSMIDToIFrameSrc(e.id)),o.setAttribute("id","social-push"),o.setAttribute("class","socl-iframe"),o.setAttribute("name","social-push"),n.appendChild(o)};t.createPushTrackingIFrame=function(e,t,n){g=soclHelper.replaceAll("{DNS}",e.dns,g),(o=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-push-tracking")).addEventListener(y);var r=soclHelper.createBaseIframe();r.setAttribute("src",g+"index.min.html?appId="+e.appId+"&id="+e.id+"&name="+encodeURIComponent(e.name)+"&pluginId=00000000000000000000000000000000&version=0&dns="+e.dns+"&url="+encodeURIComponent(document.location.href)+"&hasOptIn="+t+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+e.gaEnabled+"&googleApp="+e.googleApp),r.setAttribute("id","social-push-tracking"),r.setAttribute("class","socl-iframe"),r.setAttribute("name","social-push-tracking"),n.appendChild(r)},t.checkIfUserHaveSubscription=function(e,n){try{e.googleApp&&e.googleApp===s?t.checkIfUserHaveSubscriptionInGCM(e,function(e){n(!1)}):t.checkIfUserHaveSubscriptionInFirebase(e,function(e){n(e)})}catch(e){console.log(e)}},t.checkIfUserHaveSubscriptionInFirebase=function(e,n){try{if(null==document.getElementById("pushOptIn"))return n(!0);t.checkPushToken(e,function(e){n(e)})}catch(e){console.log(e),n(!1)}},t.checkIfUserHaveSubscriptionInGCM=function(e,t){try{null!=document.getElementById("pushOptIn")&&window.isSecureContext?"permissions"in navigator&&navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(n){switch(n.state){case"granted":"serviceWorker"in navigator?((o=document.createElement("link")).setAttribute("href",window.location.origin+"/manifest/chrome/manifest.json"),o.setAttribute("rel","manifest"),document.head.appendChild(o),navigator.serviceWorker.ready.then(function(n){n.pushManager.getSubscription().then(function(n){soclHelper.getPushEndpoint(function(o){o!==n.endpoint?soclConnect.getId(e.customerId,function(o){soclConnect.updateConnectedUser(S(o,e.customerId,n.endpoint,!0,!0),function(t){soclHelper.setStoreValue("pushendpoint",n.endpoint),soclHelper.setStoreValue("smpushoptin_"+e.customerId,"true")}),t(!0)}):t(!0),"true"!==e.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:e.customerId,endpoint:n.endpoint})})})})):t(!1);break;default:t(!1)}var o}):t(!1)}catch(e){console.log(e)}},t.checkPushToken=function(e,n){soclHelper.initFirebase(function(o){if(!o)return n(!0);t.verifyToken(e,function(e){return n(e)})})},t.verifyToken=function(e,n){if("granted"!==Notification.permission)return n(!1);t.getToken(e,function(e){return n(e)})},t.getToken=function(n,o){if("granted"!==Notification.permission){var s=soclHelper.getStoreValue(soclConnect.createSMIdKey(n.customerId));return s&&!soclCookie.getCookie(t.PUSH_TOKEN_VERIFIED.NAME)&&(soclHelper.setCookie(t.PUSH_TOKEN_VERIFIED.NAME,t.PUSH_TOKEN_VERIFIED.VALUE,365),soclHelper.getPushEndpoint(function(e){try{var t=soclHelper.getOrCreateSMObj(n.customerId),o={token:"",oldToken:e||"",pushPermission:Notification.permission},a={type:r.Ping_PushProfile,step:i.Empty,clientId:t.clientId,customerId:n.customerId,personId:s,channelId:null,additionalData:JSON.stringify(o||{}),byPassChannel:!0};windowProxy&&windowProxy.post({createEvent:a})}catch(e){console.log(e)}})),o(!1)}(d=firebase.messaging()).onTokenRefresh(function(){t.getToken(n,function(e){return o(!0)})}),d.onMessage(function(e){}),soclConnect.getId(n.customerId,function(e){windowProxy.post({identifier:n.customerId+"|"+e});var t=soclHelper.createBaseIframe();t.setAttribute("src",h+"pixel.min.html?id="+n.customerId+"&smid="+e),t.setAttribute("id","social-push-pixel"),t.setAttribute("name","social-push-pixel"),document.body.insertBefore(t,document.body.childNodes[0])}),soclHelper.getPushEndpoint(function(t){t&&t.indexOf("http")>-1&&navigator.serviceWorker.ready.then(function(t){t.pushManager.getSubscription().then(function(e){e&&soclPush.compareToken(e.endpoint,n)}).catch(function(t){e("ajaxAppender").fatalException({msg:"Exception",errorMsg:"An error occured while calling getSubscription() to check push opt in"},t)})})}),d.getToken().then(function(e){e&&(soclPush.compareToken(e,n),o(!0))}).catch(function(e){console.log("Error while trying generate new token. Err:",e),o(!1)})},t.compareToken=function(e,n){soclHelper.getPushEndpoint(function(o){n.isRefreshToken=!(o.indexOf("http")>-1&&-1===e.indexOf("http")),soclConnect.getId(n.customerId,function(s){if(!soclCookie.getCookie(t.PUSH_TOKEN_VERIFIED.NAME)){soclHelper.setCookie(t.PUSH_TOKEN_VERIFIED.NAME,t.PUSH_TOKEN_VERIFIED.VALUE,t.PUSH_TOKEN_VERIFIED.DAYS_TO_EXPIRE);try{var a=soclHelper.getOrCreateSMObj(n.customerId),c={token:e||"",oldToken:o||"",pushPermission:Notification.permission},l={type:r.Ping_PushProfile,step:i.Empty,clientId:a.clientId,customerId:n.customerId,personId:s,channelId:null,additionalData:JSON.stringify(c||{}),byPassChannel:!0};windowProxy&&windowProxy.post({createEvent:l})}catch(e){console.log(e)}}o!==e&&soclConnect.updateConnectedUser(S(s,n.customerId,e,!0,n.isRefreshToken),function(t){soclHelper.setStoreValue("pushendpoint",e),soclHelper.setStoreValue("smpushoptin_"+n.customerId,"true")})})})},t.updateUser=function(e,t){soclConnect.getId(e.customerId,function(n){soclConnect.updateConnectedUser(S(n,e.customerId,t,!0,!0),function(n){soclHelper.setStoreValue("pushendpoint",t),soclHelper.setStoreValue("smpushoptin_"+e.customerId,"true")})}),"true"!==e.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:e.customerId,endpoint:t})},t.popupInitializer=function(e){soclHelper.getPushEndpoint(function(t){var n,o;""===t?(n=function(t){if(t){var n=soclHelper.getQueryStringParams("userId"),o=soclHelper.getSMIDToIFrameSrc(e.customerId,n);$("#btClose").click(function(){windowProxy.post({close:e.daysToShowAfterClose,pluginId:e.pluginId})}),$("#btGo").click(function(){windowProxy.post({closeBounce:!0});var t=screen.width/2-525,n=screen.height/2-180;window.open(e.path+"popup.min.html?id="+e.customerId+"&name="+encodeURIComponent(e.name)+"&pluginId="+e.pluginId+"&url="+e.url+"&isMobile="+e.isMobile+"&googleApp="+e.googleApp+"&path="+encodeURIComponent(e.path)+"&version="+e.version+o,"pushPermission","width=1050,height=440,top="+n+",left="+t+";"),windowProxy.post({click:e.daysToShowAfterClose,pluginId:e.pluginId})}),windowProxy&&windowProxy.post({show:e.daysToShowAfterView+"|"+e.orientation+"|"+e.customerId+"|"+e.pluginId})}},("desktop"===(o=e.device)&&!appConfig.IsMobile()||"mobile"===o&&appConfig.IsMobile()||"all"===o)&&appConfig.IsChrome()?soclPushEngineAlfajor.supportPush(function(e){n(!0)}):n(!1)):soclConnect.getId(e.customerId,function(t){windowProxy.post({identifier:e.customerId+"|"+t});var n=soclHelper.createBaseIframe();n.setAttribute("src",h+"pixel.min.html?id="+e.customerId+"&smid="+t),n.setAttribute("id","social-push-pixel"),n.setAttribute("name","social-push-pixel"),document.body.insertBefore(n,document.body.childNodes[0])})})},t.closeMessage=function(){document.getElementById("sm-push").style.display="none"},t.closeBounceMessage=function(){null!==document.getElementById("sm-bounce")&&document.getElementById("sm-bounce").SoclRemoveTag()},t.closeOnSiteMessage=function(){null!==document.getElementById("sm-onsite-sales")&&document.getElementById("sm-onsite-sales").SoclRemoveTag()},t.render=function(e){if(navigator.cookieEnabled){soclHelper.injectDiv("sm-push","none");var t=document.getElementById("sm-push");soclHelper.hasPushOptInBy(e.id,function(n){"true"!==n?function(e){soclHelper.injectCSS(m,"push.min.css");try{v(),e(!0)}catch(t){console.warn("SM - [Ursa Enterprise]",t),e(!1)}}(function(o){o&&I(e,n,t)}):I(e,n,t),soclHelper.setStoreValue("smpid_5",e.featureSettings.pluginId)})}},t.createEventProxy=function(e){window.opener.windowProxy.post({createEvent:e})},t.clearInstance=function(){n&&n.removeEventListener(y),o&&o.removeEventListener(y),soclHelper.removeElementById("sm-push"),soclHelper.removeElementById("sm-push-tracking")}}(soclPush)}).call(this,n(0).JL)},function(e,t,n){(function(e){var t,n,o,r,i,s,a,c,l,u,p,d;window.soclPushEngineAlfajor={},t=soclPushEngineAlfajor,n=4,o=1,r=2,i=function(e,t){document.body.classList.remove(t),document.body.classList.add(e),window.smStepIntercept&&window.smStepIntercept(e,t)},s=function(){return soclHelper.getQueryStringParams("isMobile")&&"true"===soclHelper.getQueryStringParams("isMobile")?r:o},a=function(){soclHelper.getQueryStringParams("isMobile")&&"true"===soclHelper.getQueryStringParams("isMobile")?window.location.href=decodeURIComponent(soclHelper.getQueryStringParams("url")):window.close()},c=function(e,t,n,o){return{userId:e,customerId:t,endpoint:n,allowPushMessaging:o,deviceType:s()}},l=function(e){switch(i("stp2","stp1"),e.state){case"denied":soclHelper.getCID(function(e){0!==e?soclConnect.getId(e,function(t){0!==t?soclHelper.getPushEndpoint(function(n){""!==n?soclConnect.updateConnectedUser(c(t,e,n,!1),function(e){soclHelper.removeStoreValue("pushendpoint"),a()}):a()}):a()}):a()});break;case"granted":i("stp4","stp2");break;case"prompt":a()}},u=function(t){i("stp2","stp1"),soclHelper.getCID(function(o){0!==o?soclConnect.getId(o,function(e){0===e?soclConnect.signInWithPush(o,11,t.endpoint,s(),function(e){soclHelper.setStoreValue("pushendpoint",t.endpoint),i("stp3","stp2")}):soclConnect.updateConnectedUser(c(e,o,t.endpoint,!0),function(e){soclHelper.setStoreValue("pushendpoint",t.endpoint),i("stp4","stp2")}),soclHelper.getStoreValue("sm_native")||soclPerfCounter.event(soclHelper.getQueryStringParams("pluginId"),soclPerfCounter.type.Click,n,soclHelper.getQueryStringParams("id"))}):(i("stp4","stp2"),e("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Missing CID parameter'"}))})},p=function(){navigator.serviceWorker.ready.then(function(t){t.pushManager.subscribe({userVisibleOnly:!0}).then(u).catch(function(t){"permissions"in navigator?navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(t){e("ajaxAppender").fatal({msg:"Exception",errorMsg:"subscribeDevice() Error: Push permission state = "+t}),l(t)}).catch(function(t){e("ajaxAppender").fatalException({msg:"Exception",errorMsg:"Push Error to register"},t)}):"denied"===Notification.permission?e("ajaxAppender").fatal({msg:"Exception",errorMsg:"subscribeDevice() Denied Error: "+t.message}):e("ajaxAppender").fatal({msg:"Exception",errorMsg:"Push Error to register = "+t.message})})})},d=function(t){navigator.serviceWorker.ready.then(function(n){n.pushManager.getSubscription().then(function(e){e?(soclHelper.setStoreValue("pushendpoint",e.endpoint),t(!0)):t(!1)}).catch(function(t){e("ajaxAppender").fatalException({msg:"Exception",errorMsg:"An error occured while calling getSubscription() to check push opt in"},t)})})},t.hasPermission=function(e){d(function(t){e(t)})},t.setDisplay=function(){soclConnect.getFbId(function(e){i(0===e?"stp3":"stp4","stp1")})},t.initialiseState=function(t){n=void 0===t?4:t,d(function(t){t?soclConnect.getFbId(function(e){i(0===e?"stp3":"stp4","stp1")}):"permissions"in navigator?navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(e){"denied"===e.state?l(e):p()}).catch(function(t){e("ajaxAppender").fatalException({msg:"Exception",errorMsg:"An error occured while get push permission"},t)}):"denied"===Notification.permission?(i("stp4","stp1"),e("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Permission Denied'"})):"default"===Notification.permission?(i("stp4","stp1"),e("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Permission Default'"})):p()})},t.supportPush=function(e){"PushManager"in window?e(!0):e(!1)}}).call(this,n(0).JL)},function(e,t,n){n(14),n(0),n(15),n(16),n(17),n(1),n(8),n(9),n(2),n(3),n(18),n(4),n(5),n(10),n(19),n(11),n(20),n(21),n(12),n(6),n(7),n(22),n(23),n(24),e.exports=n(25)},function(e,t){window.socl_BlackList=["d29496c2-6137-4af7-9038-dbb5e388888a","c5b75f33-6671-4a13-ba6f-ef4755dc50d7","400f2d5f-5017-4303-8762-56ce506bdb1d","3f17483b-b519-4ccf-a8d9-6395d28f9793","815cff49-77e6-4424-9634-08b0e9da3be5","e8f2adf1-1cb3-47aa-9015-aef066c0e475","4a9c872c-0aa2-4d81-b1d6-7ca4b2f5b9a7","d40f44d3-5421-4dc2-b05a-cfc405107d9e","563daf73-db67-41dc-aa1b-98fbde0837c9","7149f1f9-7c0a-44b1-9ca2-f0c825d604ae","2e02f4ca-9bfc-4731-b9a1-e77c21fc3734","1f72e212-c76f-4c5a-96f4-7b106378c22b","d30374dd-56c6-4dfb-ab2b-1a054571486b","cc0e1b6c-7256-4583-aac1-c70f6b09209c","397344b2-d292-4355-bdac-00b0cb06bbb5","97255aea-1a9c-4f10-bdec-29b5956274ca","be774d94-fb32-4376-9cbe-995915abd6aa","47c3baec-611c-4b66-8bd6-c9b4ebf5bb04","16b84471-64f8-427e-b2ec-d67101f4d36e","e2f1fcb0-e624-4c79-a55f-9992b46fe8cf","888dd016-e588-40ea-97aa-cc94a9af7fa0","0eac4e5d-23d9-4bb1-a54f-507d597dac88","40ff4d0d-7b5f-4130-ba42-6b3b6a5c465d","6a552d5a-2bbb-49bb-89b1-b0efacb608c6","7f7c1c54-67e1-4a65-a654-069d7cc2db8e"]},function(e,t){!function(e,t){window.localStorageDB=function(e,n){var o="db_"+e,r=!1,i=null;try{var s=n==sessionStorage?sessionStorage:localStorage}catch(e){s=n}function a(e){return!!i.tables[e]}function c(e){a(e)||v("The table '"+e+"' does not exist")}function l(e,t,n){if(i.tables[e].fields=i.tables[e].fields.concat(t),void 0!==n)for(var o in i.data[e])if(i.data[e].hasOwnProperty(o))for(var r in t)i.data[e][o][t[r]]="object"==typeof n?n[t[r]]:n}function u(e,t){return t.ID=i.tables[e].auto_increment,i.data[e][i.tables[e].auto_increment]=t,i.tables[e].auto_increment++,t.ID}function p(e,t){return function(n,o){var r="string"==typeof n[e]?n[e].toLowerCase():n[e],i="string"==typeof o[e]?o[e].toLowerCase():o[e];return"DESC"===t?r==i?0:r<i?1:-1:r==i?0:r>i?1:-1}}function d(e,t){var n=[],o=!1,r=null;for(var s in i.data[e])if(i.data[e].hasOwnProperty(s)){for(var a in r=i.data[e][s],o=!0,t)if(t.hasOwnProperty(a))if("string"==typeof t[a]){if(r[a].toString().toLowerCase()!=t[a].toString().toLowerCase()){o=!1;break}}else if(r[a]!=t[a]){o=!1;break}o&&n.push(s)}return n}function f(e,t){var n=[];for(var o in i.data[e])i.data[e].hasOwnProperty(o)&&1==t(y(i.data[e][o]))&&n.push(o);return n}function g(e){var t=[];for(var n in i.data[e])i.data[e].hasOwnProperty(n)&&t.push(n);return t}function h(e,t,n){for(var o="",r=0,s=0;s<t.length;s++){o=t[s];var a=n(y(i.data[e][o]));if(a){delete a.ID;var c=i.data[e][o];for(var l in a)a.hasOwnProperty(l)&&(c[l]=a[l]);i.data[e][o]=I(e,c),r++}}return r}function m(){try{return s.setItem(o,JSON.stringify(i)),!0}catch(e){return!1}}function v(e){throw new Error(e)}function y(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function S(e){return!e.toString().match(/[^a-z_0-9]/gi)}function I(e,n){for(var o="",r={},s=0;s<i.tables[e].fields.length;s++)n[o=i.tables[e].fields[s]]!==t&&(r[o]=n[o]);return r}function w(e,n){for(var o="",r={},s=0;s<i.tables[e].fields.length;s++)r[o=i.tables[e].fields[s]]=null===n[o]||n[o]===t?null:n[o];return r}return(i=s[o])&&(i=JSON.parse(i.replace('"[',"[").replace(']"',"]").replace(/\\"/g,'"')))&&i.tables&&i.data||(S(e)?(i={tables:{},data:{}},m(),r=!0):v("The name '"+e+"' contains invalid characters")),{commit:function(){return m()},isNew:function(){return r},drop:function(){s.hasOwnProperty(o)&&delete s[o],i=null},serialize:function(){return JSON.stringify(i)},tableExists:function(e){return a(e)},tableFields:function(e){return function(e){return i.tables[e].fields}(e)},tableCount:function(){return function(){var e=0;for(var t in i.tables)i.tables.hasOwnProperty(t)&&e++;return e}()},columnExists:function(e,t){return function(e,t){var n=!1,o=i.tables[e].fields;for(var r in o)if(o[r]==t){n=!0;break}return n}(e,t)},createTable:function(e,t){var n=!1;if(S(e))if(this.tableExists(e))v("The table name '"+e+"' already exists.");else{for(var o=!0,r=0;r<t.length;r++)if(!S(t[r])){o=!1;break}if(o){var s={};for(r=0;r<t.length;r++)s[t[r]]=!0;for(var a in delete s.ID,t=["ID"],s)s.hasOwnProperty(a)&&t.push(a);!function(e,t){i.tables[e]={fields:t,auto_increment:1},i.data[e]={}}(e,t),n=!0}else v("One or more field names in the table definition contains invalid characters")}else v("The database name '"+e+"' contains invalid characters.");return n},createTableWithData:function(e,t){("object"!=typeof t||!t.length||t.length<1)&&v("Data supplied isn't in object form. Example: [{k:v,k:v},{k:v,k:v} ..]");var n=Object.keys(t[0]);if(this.createTable(e,n)){this.commit();for(var o=0;o<t.length;o++)u(e,t[o])||v("Failed to insert record: ["+JSON.stringify(t[o])+"]");this.commit()}return!0},dropTable:function(e){c(e),function(e){delete i.tables[e],delete i.data[e]}(e)},truncate:function(e){c(e),function(e){i.tables[e].auto_increment=1,i.data[e]={}}(e)},alterTable:function(e,t,n){var o=!1;if(S(e)){if("object"==typeof t){for(var r=!0,i=0;i<t.length;i++)if(!S(t[i])){r=!1;break}if(r){var s={};for(i=0;i<t.length;i++)s[t[i]]=!0;for(var a in delete s.ID,t=[],s)s.hasOwnProperty(a)&&t.push(a);l(e,t,n),o=!0}else v("One or more field names in the table definition contains invalid characters")}else if("string"==typeof t)if(S(t)){var c=[];c.push(t),l(e,c,n),o=!0}else v("One or more field names in the table definition contains invalid characters")}else v("The database name '"+e+"' contains invalid characters");return o},rowCount:function(e){return c(e),function(e){var t=0;for(var n in i.data[e])i.data[e].hasOwnProperty(n)&&t++;return t}(e)},insert:function(e,t){return c(e),u(e,w(e,t))},insertOrUpdate:function(e,t,n){c(e);var o=[];if(t?"object"==typeof t?o=d(e,I(e,t)):"function"==typeof t&&(o=f(e,t)):o=g(e),0==o.length)return u(e,w(e,n));for(var r=[],i=0;i<o.length;i++)h(e,o,function(e){return r.push(e.ID),n});return r},update:function(e,t,n){c(e);var o=[];return t?"object"==typeof t?o=d(e,I(e,t)):"function"==typeof t&&(o=f(e,t)):o=g(e),h(e,o,n)},query:function(e,n,o,r,s,a){c(e);var l=[];return n?"object"==typeof n?l=d(e,I(e,n)):"function"==typeof n&&(l=f(e,n)):l=g(e),function(e,n,o,r,s,a){for(var c=null,l=[],u=null,d=0;d<n.length;d++)c=n[d],u=i.data[e][c],l.push(y(u));if(s&&s instanceof Array)for(d=0;d<s.length;d++)l.sort(p(s[d][0],s[d].length>1?s[d][1]:null));if(a&&a instanceof Array){for(var f=0;f<a.length;f++){var g={},h=a[f];for(d=0;d<l.length;d++)l[d]!==t&&(l[d].hasOwnProperty(h)&&g.hasOwnProperty(l[d][h])?delete l[d]:g[l[d][h]]=1)}var m=[];for(d=0;d<l.length;d++)l[d]!==t&&m.push(l[d]);l=m}return r=r&&"number"==typeof r?r:null,(o=o&&"number"==typeof o?o:null)&&r?l=l.slice(o,o+r):o?l=l.slice(o):r&&(l=l.slice(o,r)),l}(e,l,r,o,s,a)},queryAll:function(e,t){return t?this.query(e,t.hasOwnProperty("query")?t.query:null,t.hasOwnProperty("limit")?t.limit:null,t.hasOwnProperty("start")?t.start:null,t.hasOwnProperty("sort")?t.sort:null,t.hasOwnProperty("distinct")?t.distinct:null):this.query(e)},deleteRows:function(e,t){c(e);var n=[];return t?"object"==typeof t?n=d(e,I(e,t)):"function"==typeof t&&(n=f(e,t)):n=g(e),function(e,t){for(var n=0;n<t.length;n++)i.data[e].hasOwnProperty(t[n])&&delete i.data[e][t[n]];return t.length}(e,n)}}}}()},function(e,t){!function(e){"use strict";var t,n,o,r;e&&function(){var r=e.crypto||e.msCrypto;if(!t&&r&&r.getRandomValues)try{var i=new Uint8Array(16);o=t=function(){return r.getRandomValues(i),i},t()}catch(e){}if(!t){var s=new Array(16);n=t=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}();for(var i="function"==typeof Buffer?Buffer:Array,s=[],a={},c=0;c<256;c++)s[c]=(c+256).toString(16).substr(1),a[s[c]]=c;function l(e,t){var n=t||0,o=s;return o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]}var u=t(),p=[1|u[0],u[1],u[2],u[3],u[4],u[5]],d=16383&(u[6]<<8|u[7]),f=0,g=0;function h(e,n,o){var r=n&&o||0;"string"==typeof e&&(n="binary"===e?new i(16):null,e=null);var s=(e=e||{}).random||(e.rng||t)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,n)for(var a=0;a<16;a++)n[r+a]=s[a];return n||l(s)}var m=h;m.v1=function(e,t,n){var o=t&&n||0,r=t||[],i=null!=(e=e||{}).clockseq?e.clockseq:d,s=null!=e.msecs?e.msecs:(new Date).getTime(),a=null!=e.nsecs?e.nsecs:g+1,c=s-f+(a-g)/1e4;if(c<0&&null==e.clockseq&&(i=i+1&16383),(c<0||s>f)&&null==e.nsecs&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=s,g=a,d=i;var u=(1e4*(268435455&(s+=122192928e5))+a)%4294967296;r[o++]=u>>>24&255,r[o++]=u>>>16&255,r[o++]=u>>>8&255,r[o++]=255&u;var h=s/4294967296*1e4&268435455;r[o++]=h>>>8&255,r[o++]=255&h,r[o++]=h>>>24&15|16,r[o++]=h>>>16&255,r[o++]=i>>>8|128,r[o++]=255&i;for(var m=e.node||p,v=0;v<6;v++)r[o+v]=m[v];return t||l(r)},m.v4=h,m.parse=function(e,t,n){var o=t&&n||0,r=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){r<16&&(t[o+r++]=a[e])});r<16;)t[o+r++]=0;return t},m.unparse=l,m.BufferClass=i,m._rng=t,m._mathRNG=n,m._nodeRNG=void 0,m._whatwgRNG=o,r=e.uuid,m.noConflict=function(){return e.uuid=r,m},e.uuid=m}("undefined"!=typeof window?window:null)},function(e,t){!function(e,t){var n,o=this,r=256,i=6,s="random",a=t.pow(r,i),c=t.pow(2,52),l=2*c,u=r-1;function p(e){var t,n=e.length,o=this,i=0,s=o.i=o.j=0,a=o.S=[];for(n||(e=[n++]);i<r;)a[i]=i++;for(i=0;i<r;i++)a[i]=a[s=u&s+e[i%n]+(t=a[i])],a[s]=t;(o.g=function(e){for(var t,n=0,i=o.i,s=o.j,a=o.S;e--;)t=a[i=u&i+1],n=n*r+a[u&(a[i]=a[s=u&s+t])+(a[s]=t)];return o.i=i,o.j=s,n})(r)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var n,o=e+"",r=0;r<o.length;)t[u&r]=u&(n^=19*t[u&r])+o.charCodeAt(r++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}t["seed"+s]=function(u,h,m){var v=[],y=f(function e(t,n){var o,r=[],i=typeof t;if(n&&"object"==i)for(o in t)try{r.push(e(t[o],n-1))}catch(e){}return r.length?r:"string"==i?t:t+"\0"}((h=1==h?{entropy:!0}:h||{}).entropy?[u,g(e)]:null==u?function(){try{if(n)return g(n.randomBytes(r));var t=new Uint8Array(r);return(o.crypto||o.msCrypto).getRandomValues(t),g(t)}catch(t){var i=o.navigator,s=i&&i.plugins;return[+new Date,o,s,o.screen,g(e)]}}():u,3),v),S=new p(v),I=function(){for(var e=S.g(i),t=a,n=0;e<c;)e=(e+n)*r,t*=r,n=S.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return I.int32=function(){return 0|S.g(4)},I.quick=function(){return S.g(4)/4294967296},I.double=I,f(g(S.S),e),(h.pass||m||function(e,n,o,r){return r&&(r.S&&d(r,S),e.state=function(){return d(S,{})}),o?(t[s]=e,n):e})(I,y,"global"in h?h.global:this==t,h.state)},f(t.random(),e)}([],Math)},function(e,t,n){(function(e){window.soclError={},function(t){var n=e.createAjaxAppender("ajaxAppender"),o="";soclHelper&&(o=soclHelper.getEnvironment());var r="https://"+o+"api.soclminer.com.br/v2.1/client/error";n.setOptions({bufferSize:3,storeInBufferLevel:e.getErrorLevel(),level:e.getFatalLevel(),sendWithBufferLevel:e.getFatalLevel(),url:r}),window.onerror=function(e,t,n,o,r){return!1},t.setAppender=function(){e().setOptions({appenders:[n]})}}(soclError),soclError.setAppender()}).call(this,n(0).JL)},function(e,t,n){(function(e){window.firebaseMessaging={},function(t){var n={Ping:"Ping.PushProfile",Channel_View:"Channel.View",Channel_Conclusion:"Channel.Conclusion",Channel_Rejection:"Channel.Rejection",Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_AlreadyConnected:"Channel.Step.AlreadyConnected",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_Step_Block:"Channel.Step.Block",Channel_ConclusionWithRejection:"Channel.ConclusionWithRejection",Channel_Step_Error:"Channel.Step.Error"},o={Empty:"",OS_Notification:"OS.Notification",OS_Notification_Popup:"OS.Notification.Popup",OS_Notification_Popup_Policy:"OS.Notification.Popup.Policy",OS_Notification_Popup_PoweredBy:"OS.Notification.Popup.PoweredBy",OS_Notification_Popup_Dialog:"OS.Notification.Popup.Dialog"};t.start=function(e,t){if(!window.isSecureContext)return t(!1);soclHelper.initFirebase(function(e){return t(e)})},t.onMessage=function(e){},t.onTokenRefresh=function(e){e.onTokenRefresh(function(){e.getToken().then(function(e){console.log("Token refreshed. New token: "+e),soclConnect.getId(metadata.customerId,function(e){soclConnect.updateConnectedUser(r(e,metadata.customerId,currentToken,!0,!0),function(e){soclHelper.setStoreValue("pushendpoint",currentToken),soclHelper.setStoreValue("smpushoptin_"+metadata.customerId,"true")})}),"true"!==metadata.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:metadata.customerId,endpoint:currentToken})}).catch(function(e){console.log("Unable to retrieve refreshed token ",e)})})},t.getToken=function(e,t,n){e.getToken().then(function(e){console.log("currentToken",e),e?(soclHelper.getPushEndpoint(function(n){n!==e&&soclConnect.getId(t.customerId,function(n){soclConnect.updateConnectedUser(r(n,t.customerId,e,!0,!0),function(n){soclHelper.setStoreValue("pushendpoint",e),soclHelper.setStoreValue("smpushoptin_"+t.customerId,"true")})}),"true"!==t.hasOptIn&&windowProxy.post({hasOptin:"true",customerId:t.customerId,endpoint:e})}),n(!0)):n(!1)}).catch(function(e){console.log("An error occurred while retrieving token. ",e),n(!1)})};var r=function(e,t,n,o,r){return{userId:e,customerId:t,endpoint:n,allowPushMessaging:o,deviceType:r}};t.organicPushPermission=function(e){if(!soclHelper.getStoreValue("pushendpoint")&&firebase){var t=firebase.messaging();soclHelper.getCID(function(n){t.getToken().then(function(t){if(0!==n){var o=s();soclConnect.signInWithPush(n,11,t,o,function(n){soclHelper.setStoreValue("pushendpoint",t),e(!0,n)})}})})}e(!1,0)};var s=function(){var e=1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e=2),e},a=null,c=0;t.requestPermission=function(e,r){soclHelper.initFirebase(function(l){if(!l)return r(!1);c=s(),a=firebase.messaging(),soclPerfCounter.event(e.pluginId,soclPerfCounter.type.View,5,e.customerId),setTimeout(function(){try{var t={type:n.Channel_Step_View,step:o.OS_Notification_Popup_Dialog,channelId:e.pluginId};t.channelId&&soclPush.createEventProxy(t)}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}$(".policy a").click(function(){try{var t={type:n.Channel_Step_Conclusion,step:o.OS_Notification_Popup_Policy,channelId:e.pluginId};t.channelId&&soclPush.createEventProxy(t)}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}}),$("#poweredBy").click(function(){try{var t={type:n.Channel_Step_Conclusion,step:o.OS_Notification_Popup_PoweredBy,channelId:e.pluginId};t.channelId&&soclPush.createEventProxy(t)}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}})},1e3),null!==document.getElementById("sm-bounce")&&document.getElementById("sm-bounce").SoclRemoveTag(),soclCookie.createCookie("smViewPushOptin",!0,e.daysToShowAfterView),Notification.requestPermission().then(function(s){switch(s){case"granted":t.permissionGranted(e.pluginId,e.customerId,function(e){return r(e)});break;case"denied":t.permissionDenied(e.pluginId);break;case"default":t.permissionDefault(e.pluginId);break;default:try{var a=[];for(a.push({type:n.Channel_Step_Error,step:o.OS_Notification_Popup_Dialog,channelId:e.pluginId}),a.push({type:n.Channel_Rejection,step:o.OS_Notification,channelId:e.pluginId}),i=0;i<a.length;i++)a[i].channelId&&soclPush.createEventProxy(a[i])}catch(e){window.opener.console.log("SM - Failed on sending error event to engage",e),console.log("SM - Failed on sending error event to engage",e)}window.close(),window.close()}}).catch(function(t){try{var r=[];for(t&&t.code&&t.code.includes("block")?r.push({type:n.Channel_Step_Block,step:o.OS_Notification_Popup_Dialog,channelId:e.pluginId}):r.push({type:n.Channel_Step_Rejection,step:o.OS_Notification_Popup_Dialog,channelId:e.pluginId}),r.push({type:n.Channel_Rejection,step:o.OS_Notification,channelId:e.pluginId}),i=0;i<r.length;i++)r[i].channelId&&soclPush.createEventProxy(r[i])}catch(e){console.log("SM - Failed on sending rejection event to engage",e),window.opener.console.log("SM - Failed on sending rejection event to engage",e)}window.close(),window.close()})})},t.permissionGranted=function(t,l,u){c||(c=s()),a||(a=firebase.messaging()),a.getToken().then(function(s){soclHelper.setCookie(soclPush.PUSH_TOKEN_VERIFIED.NAME,soclPush.PUSH_TOKEN_VERIFIED.VALUE,soclPush.PUSH_TOKEN_VERIFIED.DAYS_TO_EXPIRE),soclHelper.getCID(function(a){0!==a?soclConnect.getId(a,function(e){if(0===e){soclConnect.signInWithPush(a,11,s,c,function(e){soclHelper.setStoreValue("pushendpoint",s)},t);try{var p=[{type:n.Channel_Step_Conclusion,step:o.OS_Notification_Popup_Dialog,channelId:t}];for(i=0;i<p.length;i++)p[i].channelId&&soclPush.createEventProxy(p[i])}catch(e){console.log("SM - Failed on sending Step Conclusion Event to Engage",e),window.opener.console.log("SM - Failed on sending Step Conclusion Event to Engage",e)}}else{soclConnect.updateConnectedUser(r(e,a,s,!0,c),function(e){soclHelper.setStoreValue("pushendpoint",s)});try{p=[{type:n.Channel_Step_AlreadyConnected,step:o.OS_Notification_Popup_Dialog,channelId:t}];for(i=0;i<p.length;i++)p[i].channelId&&soclPush.createEventProxy(p[i])}catch(e){window.opener.console.log("SM - Failed on sending AlreadyConnected Event to Engage",e),console.log("SM - Failed on sending AlreadyConnected Event to Engage",e)}}soclPerfCounter.event(t,soclPerfCounter.type.Click,5,l),$("#btnSave").click(function(e){try{var r=[];for($("input[type = 'email']").val()?r.push({type:n.Channel_Conclusion,step:o.OS_Notification,channelId:t}):r.push({type:n.Channel_ConclusionWithRejection,step:o.OS_Notification,channelId:t}),i=0;i<r.length;i++)r[i].channelId&&soclPush.createEventProxy(r[i])}catch(e){window.opener.console.log("SM - Failed on sending conclusion event to engage",e),console.log("SM - Failed on sending conclusion event to engage",e)}});try{u(!0)}catch(e){window.opener.console.log("SM - Get Token Callback Error",e),console.log("SM - Get Token Callback Error",e),window.close(),window.close()}}):(e("ajaxAppender").fatal({msg:"Exception",errorMsg:"Error trying to subscriber user to push notification: 'Missing CID parameter'"}),window.close(),window.close())})}).catch(function(e){console.log("SM - An error occurred while retrieving token. ",e),window.opener.console.log("SM - An error occurred while retrieving token. ",e),soclPushEngineAlfajor.setDisplay("stp4","stp1");try{var r={type:n.Channel_Step_Error,step:o.OS_Notification_Popup_Dialog,channelId:t};r.channelId&&soclPush.createEventProxy(r)}catch(e){window.opener.console.log(e),console.log(e)}window.close(),window.close()})},t.permissionDenied=function(e){try{var t=[];for(t.push({type:n.Channel_Step_Block,step:o.OS_Notification_Popup_Dialog,channelId:e}),t.push({type:n.Channel_Rejection,step:o.OS_Notification,channelId:e}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending error event to engage",e),console.log("SM - Failed on sending error event to engage",e)}window.close(),window.close()},t.permissionDefault=function(e){try{var t=[];for(t.push({type:n.Channel_Step_Rejection,step:o.OS_Notification_Popup_Dialog,channelId:e}),t.push({type:n.Channel_Rejection,step:o.OS_Notification,channelId:e}),i=0;i<t.length;i++)t[i].channelId&&soclPush.createEventProxy(t[i])}catch(e){window.opener.console.log("SM - Failed on sending error event to engage",e),console.log("SM - Failed on sending error event to engage",e)}window.close(),window.close()}}(firebaseMessaging)}).call(this,n(0).JL)},function(e,t){window.soclOnsiteSales={},function(e){Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var t,n,o=null,r={Channel_View:"Channel.View",Channel_Conclusion:"Channel.Conclusion",Channel_Rejection:"Channel.Rejection",Channel_Suppression:"Channel.Suppression",Channel_Step_View:"Channel.Step.View",Channel_Step_Conclusion:"Channel.Step.Conclusion",Channel_Step_Rejection:"Channel.Step.Rejection",Channel_ConclusionWithRejection:"Channel.ConclusionWithRejection"},i={Empty:"",OS_Message:"OS.Message",OS_Message_Fab:"OS.Message.Fab",OS_Message_Message:"OS.Message.Message"},s="https://{DNS}.soclminer.com.br/{PID}",a="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/html/onsite-sales/",c="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/assets/css/",l=["d0fc654df5094d32a4b6d9ad8d02cbb4","d13b2682b72e42cc9203ee1f0a20b68d"],u=function(){(o=new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-onsite")).addEventListener(p)},p=function(e){if(null!==(n=document.getElementById("sm-onsite-sales"))){if(void 0!==e.data.show){var t=(I=e.data.show.split("|"))[0],o=I[1],s=parseInt(I[2]),a=parseInt(I[3]);n.setAttribute("class","socl-"+t);var c=soclHelper.getStoreValue("smcid"),l=soclHelper.getSessionValue("pagesview_"+o),u=parseInt(l)>s,p=soclCookie.getCookie("smClickOnSite_"+o),d=soclCookie.getCookie("smClosedOnSite_"+o),f=parseInt(soclHelper.getStoreValue("onsiteview_"+o));if(!d&&!p&&u&&(!f||0==a||parseInt(f)<a)){var h={ImpactTimes:isNaN(f)?0:f},m={};m.create_date=soclHelper.getNow(),m.path=window.location.pathname;var v=appConfig.IsMobile()?"7":"3";if(m.smid=v.concat("-8"),soclHelper.isInSuppressionGroup(c,o)){m.kind="suppression";try{var y={type:r.Channel_Suppression,step:i.OS_Message,channelId:o,additionalData:h};soclHelper.createEvent(y),isNaN(f)?soclHelper.setStoreValue("onsiteview_"+o,"1"):soclHelper.setStoreValue("onsiteview_"+o,JSON.stringify(f+=1)),soclOnsiteSales.closeMessage()}catch(e){console.log(e)}}else{n.style.display="",m.kind="view";try{(y={type:r.Channel_View,step:i.OS_Message,channelId:o,additionalData:h}).channelId&&soclHelper.createEvent(y)}catch(e){console.log(e)}}var S=soclHelper.addOrGetEvent(c,"sm_views",m);soclHelper.setLocalStorageValue("sm_views",JSON.stringify(S))}}if(void 0!==e.data.clickToOpen)try{(y={type:r.Channel_Step_Conclusion,step:i.OS_Message_Fab,channelId:e.data.clickToOpen}).channelId&&soclHelper.createEvent(y)}catch(e){console.log(e)}if(void 0!==e.data.open){var I=e.data.open.split("|");a=parseInt(I[0]),t=I[1],c=I[2],o=I[3],s=parseInt(I[4]);if(n.setAttribute("class","socl-open socl-"+t),!soclCookie.getCookie("smClosedOnSite_"+o)&&!soclCookie.getCookie("smClickOnSite_"+o)&&parseInt(soclHelper.getSessionValue("pagesview_"+o))>s&&(!soclHelper.getStoreValue("onsiteview_"+o)||parseInt(soclHelper.getStoreValue("onsiteview_"+o))<a||0==a)){n.style.display="",soclPerfCounter.event(o,soclPerfCounter.type.View,6,c);var w=parseInt(soclHelper.getStoreValue("onsiteview_"+o));isNaN(w)?soclHelper.setStoreValue("onsiteview_"+o,"1"):(w+=1,soclHelper.setStoreValue("onsiteview_"+o,JSON.stringify(w))),soclCookie.createCookie("smViewOnSite",!0,3),socl.emmit.onView({id:o,type:"onsite"});try{(y={type:r.Channel_Step_View,step:i.OS_Message_Message,channelId:o}).channelId&&soclHelper.createEvent(y)}catch(e){console.log(e)}}}if(void 0!==e.data.close){I=e.data.close.split("|");var b=parseInt(I[0]);o=I[1];b>0&&soclCookie.createCookieOnSite("smClosedOnSite_"+o,!0,b),soclHelper.setStoreValue("onsiteview_"+I.pluginId,"0"),soclCookie.createCookie("smCloseOnSite",!0,3),socl.emmit.onClose({id:I.pluginId,type:"onsite"}),soclOnsiteSales.closeMessage();try{(y={type:r.Channel_Rejection,step:i.OS_Message,channelId:o}).channelId&&soclHelper.createEvent(y)}catch(e){console.log(e)}}if(void 0!==e.data.click){o=(I=e.data.click.split("|"))[0],c=I[1];var _=parseInt(I[2]),C=I[3],E=g(new URL(C));soclPerfCounter.event(o,soclPerfCounter.type.Click,6,c),soclHelper.setStoreValue("onsiteview_"+o,"0"),_>0&&soclCookie.createCookieOnSite("smClickOnSite_"+o,!0,_),soclCookie.createCookie("smClickOnSite",!0,3),socl.emmit.onClick({id:o,type:"onsite"});try{(y={type:r.Channel_Conclusion,step:i.OS_Message,channelId:o}).channelId&&soclHelper.createEvent(y)}catch(e){console.log(e)}window.top.location.href=E.toString(),setTimeout(function(){soclOnsiteSales.closeMessage()},1e3)}}},d=function(e,t,n){e.featureSettings.pluginId?soclHelper.hasPushOptInBy(e.id,function(t){s=soclHelper.replaceAll("{PID}",e.featureSettings.pluginId,s),n.setAttribute("src",a+"index.min.html?appId="+e.appId+"&id="+e.id+"&name="+encodeURIComponent(e.name)+"&pluginId="+e.featureSettings.pluginId+"&pluginParameters="+encodeURIComponent(e.featureSettings.pluginParameters)+"&version="+e.featureSettings.version+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(s)+"&hasOptIn="+t+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+e.gaEnabled)}):n.setAttribute("src",a+"index.min.html?appId="+e.appId+"&id="+e.id+"&name="+encodeURIComponent(e.name)+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(s)+"&gaEnabled="+e.gaEnabled),n.setAttribute("id","social-onsite"),n.setAttribute("class","socl-iframe"),n.setAttribute("name","social-onsite"),t.appendChild(n)},f=function(e,o){null==n.getAttribute("hasViewedOnSiteInThisPage")&&parseInt(soclHelper.getPosition())>=parseInt(t.scrollPercentage)&&(n.setAttribute("hasViewedOnSiteInThisPage","true"),d(e,n,o))},g=function(e){return l.includes(soclHelper.getStoreValue("smcid"))?(new URLSearchParams(window.location.search).forEach(function(t,n){e.searchParams.append(n,t)}),e):e};e.closeMessage=function(){null!==document.getElementById("sm-onsite-sales")&&document.getElementById("sm-onsite-sales").SoclRemoveTag()},e.render=function(e){navigator.cookieEnabled&&(soclHelper.injectDiv("sm-onsite-sales","none"),null!==(n=document.getElementById("sm-onsite-sales"))&&e.featureSettings.pluginParameters&&function(e){soclHelper.injectCSS(c,"onsite.min.css");try{u(),e(!0)}catch(t){console.warn("SM - [Ursa Enterprise]",t),e(!1)}}(function(o){if(o){var r=soclHelper.createBaseIframe();t=JSON.parse(e.featureSettings.pluginParameters),s=soclHelper.replaceAll("{DNS}",e.dns,s),t.scrollPercentage>0?(document.addEventListener("scroll",function(){f(e,r)},!1),t.timeInSite>0&&setTimeout(function(){!function(e,t){null==n.getAttribute("hasViewedOnSiteInThisPage")&&(n.setAttribute("hasViewedOnSiteInThisPage","true"),d(e,n,t))}(e,r)},t.timeInSite)):d(e,n,r)}}))},e.clearInstance=function(){o&&o.removeEventListener(p),document.removeEventListener("scroll",f),soclHelper.removeElementById("sm-onsite-sales")}}(soclOnsiteSales)},function(e,t){window.soclOnSite={},function(e){Element.prototype.SoclRemoveTag=function(){this.parentElement.removeChild(this)},NodeList.prototype.SoclRemoveTag=HTMLCollection.prototype.SoclRemove=function(){for(var e=0,t=this.length;e<t;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var t="https://{DNS}.soclminer.com.br/{PID}",n="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/channels/html/",o="https://"+soclHelper.getEnvironment()+"plugins.soclminer.com.br/v3/sdk/channels/assets/css/",r=function(){new soclPorthole.WindowProxy(soclHelper.PROXY_URI,"social-onsite").addEventListener(i)},i=function(e){var t=document.getElementById("sm-onsite");if(null!==t){if(void 0!==e.data.show){var n=(a=e.data.show.split("|"))[0],o=a[1];t.setAttribute("class","socl-"+n),"true"===o?soclCookie.getCookie("smViewedOnSiteLead")||soclCookie.getCookie("smClosedOnSiteLead")||(t.style.display=""):soclCookie.getCookie("smViewedOnSite")||soclCookie.getCookie("smClosedOnSite")||(t.style.display="")}if(void 0!==e.data.open){var r=(a=e.data.open.split("|"))[0],i=(n=a[1],a[2]),s=a[3];o=a[4];t.setAttribute("class","socl-open socl-"+n),"true"===o?soclCookie.getCookie("smViewedOnSiteLead")||soclCookie.getCookie("smClosedOnSiteLead")||(null!==s&&soclPerfCounter.event(s,soclPerfCounter.type.Impression,4,i),soclCookie.createCookie("smViewedOnSiteLead",!0,r)):soclCookie.getCookie("smViewedOnSite")||soclCookie.getCookie("smClosedOnSite")||soclCookie.createCookie("smViewedOnSite",!0,r)}if(void 0!==e.data.close){var a,c=(a=e.data.close.split("|"))[0];"true"===(o=a[1])?soclCookie.createCookie("smClosedOnSiteLead",!0,c):soclCookie.createCookie("smClosedOnSite",!0,c),soclOnSite.closeMessage()}}};e.closeMessage=function(){null!==document.getElementById("sm-onsite")&&document.getElementById("sm-onsite").SoclRemoveTag()},e.render=function(e){if(navigator.cookieEnabled){soclHelper.injectDiv("sm-onsite","none");var i=document.getElementById("sm-onsite");null!==i&&function(e){soclHelper.injectCSS(o,"onsite.min.css");try{r(),e(!0)}catch(t){console.warn("SM - [Ursa Enterprise]",t),e(!1)}}(function(o){if(o){var r=soclHelper.createBaseIframe();t=soclHelper.replaceAll("{DNS}",e.dns,t),e.featureSettings.pluginId?soclHelper.hasPushOptInBy(e.id,function(o){t=soclHelper.replaceAll("{PID}",e.featureSettings.pluginId,t),r.setAttribute("src",n+"index-alfajor.min.html?appId="+e.appId+"&id="+e.id+"&name="+encodeURIComponent(e.name)+"&pluginId="+e.featureSettings.pluginId+"&version="+e.featureSettings.version+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(t)+"&hasOptIn="+o+"&isMobile="+soclHelper.isMobile()+"&gaEnabled="+e.gaEnabled),soclHelper.setStoreValue("smpid_4",e.featureSettings.pluginId)}):r.setAttribute("src",n+"index-alfajor.min.html?appId="+e.appId+"&id="+e.id+"&name="+encodeURIComponent(e.name)+"&url="+encodeURIComponent(document.location.href)+"&path="+encodeURIComponent(t)+"&gaEnabled="+e.gaEnabled),r.setAttribute("id","social-onsite"),r.setAttribute("class","socl-iframe"),r.setAttribute("name","social-onsite"),i.appendChild(r)}})}}}(soclOnSite)},function(e,t){soclOuibounce=function(e,t){var t=t||{},n=t.aggressive||!1,o=h(t.sensitivity,20),r=h(t.timer,1e3),i=h(t.delay,0),s=t.callback||function(){},a=t.onBeforeShow||function(){},c=t.displayBounce,l=m(t.cookieExpire)||"",u=t.cookieDomain?";domain="+t.cookieDomain:"",p=t.cookieName?t.cookieName:"viewedOuibounceModal",d=!0===t.sitewide?";path=/":"",f=null,g=document.documentElement;function h(e,t){return void 0===e?t:e}function m(e){var t=24*e*60*60*1e3,n=new Date;return n.setTime(n.getTime()+t),"; expires="+n.toUTCString()}function v(e){e.clientY>o||w(p,"true")&&!n||!c||(f=setTimeout(b,i))}function y(e){f&&(clearTimeout(f),f=null)}setTimeout(function(){g.addEventListener("mouseleave",v),g.addEventListener("mouseenter",y),g.addEventListener("keydown",I)},r);var S=!1;function I(e){S||w(p,"true")&&!n||e.metaKey&&76===e.keyCode&&(S=!0,f=setTimeout(b,i))}function w(e,t){return function(){for(var e=document.cookie.split("; "),t={},n=e.length-1;n>=0;n--){var o=e[n].split("=");t[o[0]]=o[1]}return t}()[e]===t}function b(){var t=a()||!1;t||(e&&(e.style.display="block"),_(),s())}function _(e){var e=e||{};void 0!==e.cookieExpire&&(l=m(e.cookieExpire)),!0===e.sitewide&&(d=";path=/"),void 0!==e.cookieDomain&&(u=";domain="+e.cookieDomain),void 0!==e.cookieName&&(p=e.cookieName),document.cookie=p+"=true"+l+u+d,g.removeEventListener("mouseleave",v),g.removeEventListener("mouseenter",y),g.removeEventListener("keydown",I)}return{fire:b,disable:_,destroy:function(){g.removeEventListener("mouseleave",v),g.removeEventListener("mouseenter",y),g.removeEventListener("keydown",I)}}}},function(e,t){var n,o,r,i;window.soclOrganic={},n=soclOrganic,o=!1,r=function(){o=!1},i=function(e,t,s,a,c){var l=soclHelper.getStoreValue("smcid");if("connected"!==soclHelper.getStoreValue(l)){if(o)return void 0===c&&(c=10),void(c>0&&window.setTimeout(function(){i(e,t,s,a,c--)},1e3));o=!0;try{if(void 0===e)return!1;void 0===s&&(s=2),void 0===a&&(a=!1);var u={};u[e]={value:t,weight:s},n.updateUser(u,a)}catch(e){console.log("SM - Error on update organic optin user",e),r()}}},n.updateUser=function(e,t){void 0===t&&(t=!1);var n=soclHelper.getLocalStorageValue("socl_Organic");n||(n={});var o=function(e,t){var n=!1;return Object.keys(t).forEach(function(o){(void 0===e[o]||e[o].value!=t[o].value&&e[o].weight<t[o].weight)&&(void 0===e[o]&&(e[o]={}),e[o].value=t[o].value,e[o].weight=t[o].weight,n=!0)}),!!n&&e}(n,e);if(o){soclHelper.setLocalStorageValue("socl_Organic",JSON.stringify(o));var i=soclHelper.getStoreValue("smcid"),s=soclHelper.getStoreValue(soclConnect.createSMIdKey(soclHelper.replaceAll("-","",i)));t?r():s?soclConnect.updateOrganic(o,i,s,r):soclConnect.signInOrganic(o,i,24,r)}else r()},n.updateUserEmail=function(e,t,n){i("email",e,t,n)},n.updateUserName=function(e,t,n){e.includes("*")||i("firstName",e,t,n)},n.updateUserPhone=function(e,t,n){"string"!=typeof e&&(e=String(e));var o=(e=e.replace(/\D/g,"")).match(/(\d{0,2})(\d{0,5})(\d{0,4})/);e=o[2]?"("+o[1]+") "+o[2]+(o[3]?"-"+o[3]:""):o[1],/^(\(\d{2}\)\s)(\d{5}\-\d{4})$/.test(e)&&i("phone",e,t,n)}},function(e,t){window.soclOrganicScript=function(){function e(){null==soclHelper.getStoreValue("socl_organic_updated")&&window.setTimeout(function(){void 0!==window.customerData&&("string"==typeof window.customerData.firstname&&soclOrganic.updateUserName(window.customerData.firstname,5,!0),"string"==typeof window.customerData.email&&soclOrganic.updateUserEmail(window.customerData.email),soclHelper.setStoreValue("socl_organic_updated","true"))},8e3)}document.querySelector(".greet.welcome")&&(document.querySelector(".greet.welcome").textContent.trim().includes("Riachuelo")||e()),window.location.href.includes("/checkout/")&&e()},window.smCrawler=function(){}},function(module,exports){!function(e){function t(t){for(var n,r,i=t[0],s=t[1],a=0,l=[];a<i.length;a++)r=i[a],o[r]&&l.push(o[r][0]),o[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);l.length;)l.shift()()}var n={},o={0:0};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=i);var s,a=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=function(e){return r.p+""+({1:"fakePreset"}[e]||e)+"."+{1:"e8ce7e1b"}[e]+".chunk.js"}(e),s=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+i+")");s.type=r,s.request=i,n[1](s)}o[e]=void 0}};var l=setTimeout(function(){s({type:"timeout",target:c})},12e4);c.onerror=c.onload=s,a.appendChild(c)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var a=0;a<i.length;a++)t(i[a]);var c=s;r(r.s=10)}([function(e,t,n){"use strict";var o=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!1===t(e[n],n,e))break},r=function(e,t){var n=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.push(t(e[o],o,e));return n},i=function(e,t,n){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n=t(n,e[o],o,e));return n},s=function(e){for(var t=[],n=e.length>>>0;n--;)t[n]=e[n];return t},a=n(4),c=n.n(a),l=function e(t,n){if(t[n])return t[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&"object"===c()(t[o])&&!(t[o]instanceof Array)){var r=e(t[o],n);if(r)return r}return null},u=n(1),p=n.n(u),d=n(2),f=n.n(d),g=function(e){return new Promise(function(t){return setTimeout(t,e)})},h=function(){var e=f()(p.a.mark(function e(t){var n,o,r=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:100,o=r.length>2&&void 0!==r[2]?r[2]:10,e.prev=2,e.next=5,t();case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),!(o>0)){e.next=16;break}return e.next=13,g(n);case 13:return e.abrupt("return",h(t,n,o-1));case 16:throw e.t0;case 17:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),m=function(e,t,n){return{contains:t.includes(n)?t:"",equal:t==n?t:"",startswith:t.startsWith(n)?t:"",endswith:t.endsWith(n)?t:"",regex:t.match(n)?t:""}[e]},v=function(e){return null!=e&&null!=e&&""!=e};n.d(t,"d",function(){return o}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return i}),n.d(t,"g",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"h",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return v})},function(e,t,n){e.exports=n(11)},function(e,t){function n(e,t,n,o,r,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(o,r)}e.exports=function(e){return function(){var t=this,o=arguments;return new Promise(function(r,i){var s=e.apply(t,o);function a(e){n(s,r,i,a,c,"next",e)}function c(e){n(s,r,i,a,c,"throw",e)}a(void 0)})}}},function(e,t,n){var o=n(5);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=o=function(e){return n(e)}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},o(t)}e.exports=o},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var o=n(13),r=n(14),i=n(15);e.exports=function(e,t){return o(e)||r(e,t)||i()}},function(e,t,n){"use strict";t.a={isEnvLocal:!1,isEnvBeta:!1,smDataLayerKey:"sm__dataLayer"}},function(e,t,n){"use strict";var o={};n.r(o),n.d(o,"cookieSelectors",function(){return s}),n.d(o,"dataLayerSelectors",function(){return v}),n.d(o,"localStorageSelectors",function(){return y}),n.d(o,"nodeSelectors",function(){return S}),n.d(o,"sessionStorageSelectord",function(){return I}),n.d(o,"urlSelectors",function(){return w});var r=n(3),i=n.n(r),s={cookie:function(e){for(var t=[],n=document.cookie.split(";"),o=new RegExp("".concat(e,"=\\s*(.*)?"),"iu"),r=0;r<n.length;r++){var i=n[r].match(o);i&&t.push(i[1])}return t.filter(function(e){return!!e})}},a=n(4),c=n.n(a),l=n(5),u=n.n(l),p=n(6),d=n.n(p),f=n(0),g={attr:function(e,t){return!!e[t]&&m(e[t],h)},children:function(e){return m(Object(f.e)(Object(f.g)(e.children),function(e){return m(e,g)}),g)},reduce:function(e,t,n){return e=e instanceof Array?e:[e],Object(f.f)(e,t,n)},forEach:function(e,t){return e=e instanceof Array?e:[e],Object(f.d)(e,t)},map:function(e,t){return e=e instanceof Array?e:[e],Object(f.e)(e,t)},exists:function(e,t){return null!==e},hasClass:function(e,t){return-1!==e.className.index(t)},html:function(e){return g.attr(e,"innerHTML")},text:function(e){return g.attr(e,"textContent")},textOnly:function(e){return g.attr(e,"innerHTML").match(/^[^<]+/)[0]},tagAttributes:function(e,t){return t?m(e.attributes[t].value,h):Object(f.f)(Object(f.g)(e.attributes),function(e,t){return i()({},e,u()({},t.name,m(t.value,h)))},{})}},h={asIs:function(e){return e},asInlineText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"; ";return e.replace(/\n+/,t)},asCleanText:function(e){return e.replace(/\t/g," ").replace(/[\u202F\u00A0]/g,"").replace(/^\n+$/g,"").replace(/\n{2,}/g,"\n").replace(/\s{2,}/g," ").replace(/^(?:\s|\t)+/g,"").replace(/(?:\s|\t)+$/g,"\n").trim()},asMonetary:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",n=(e=e.toString()).replace(/[^0-9,.]/gi,"").replace(/\D/g,t).split(t);return 1===n.length&&n.push("00"),[n.slice(0,-1).join(""),n[n.length-1]].join(t)},match:function(e,t){return Object(f.e)(e.match(t),function(e){return m(e,h)})},decode:function(e){return window.decodeURIComponent(e)}},m=function(e,t){return i()({_:e},Object(f.f)(Object.entries(t),function(t,n){var o=d()(n,2),r=o[0],s=o[1];return i()({},t,u()({},r,function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return s.apply(void 0,[e].concat(n))}))},{}))},v={dataLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=window.dataLayer[t],o=e?Object(f.c)(n,e):n;return"object"===c()(o)?o:m(o,h)}},y={localStorage:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=localStorage.getItem(e);return!t||"["!==t[0]&&"{"!==t[0]?t:JSON.parse(t)})},S={select:function(e){return m(document.querySelector(e)||null,g)},selectAll:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return Object(f.e)(Array.prototype.slice.call(document.querySelectorAll(e)||[null]),function(e,n,o){return t(m(e,g),n,o)})}},I={sessionStorage:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=sessionStorage.getItem(e);return!t||"["!==t[0]&&"{"!==t[0]?t:JSON.parse(t)})},w={domain:function(e,t,n){return b.extract(n,Object(f.a)(e,window.location.href,t))},host:function(e,t,n){return b.extract(n,Object(f.a)(e,window.location.host,t))},fragment:function(e,t,n){return b.extract(n,Object(f.a)(e,window.location.hash,t))},path:function(e,t,n){return b.extract(n,Object(f.a)(e,window.location.pathname,t))},parameter:function(e,t,n){return b.extract(n,Object(f.a)(e,window.location.search,t))}},b={extract:function(e,t){switch(e){case"exists":return Object(f.b)(t);case"asMonetary":return h.asMonetary(t);default:return t}}};t.a=Object(f.f)(Object.values(o),function(e,t){return i()({},e,t)},{location:function(){return window.location}})},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__),globalSettings__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),rogue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8),helpers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),smDataLayerKey=globalSettings__WEBPACK_IMPORTED_MODULE_3__.a.smDataLayerKey,getSmDataLayer=function(){return window[smDataLayerKey]||{}},shouldRunExtractorGroup=function shouldRunExtractorGroup(extractorGroup){return eval(extractorGroup.shouldRun)(rogue__WEBPACK_IMPORTED_MODULE_4__.a)},callEventCrawlerFinalized=function(e){var t=new CustomEvent("crawler-finished",{detail:e});document.dispatchEvent(t)},runExtractorGroup=function runExtractorGroup(extractorGroupName,extractorGroup){return Promise.all(Object(helpers__WEBPACK_IMPORTED_MODULE_5__.e)(Object.entries(extractorGroup.extractors),function(){var _ref=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(extractor){var _extractor,extractorName,extractorFunc,extractedValue;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _extractor=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(extractor,2),extractorName=_extractor[0],extractorFunc=_extractor[1],_context.prev=1,_context.next=4,Object(helpers__WEBPACK_IMPORTED_MODULE_5__.h)(function(){var extractedValue=eval(extractorFunc)(rogue__WEBPACK_IMPORTED_MODULE_4__.a);if(void 0===extractedValue)throw new Error("".concat(extractorName," is undefined"));return extractedValue});case 4:extractedValue=_context.sent,_context.next=11;break;case 7:_context.prev=7,_context.t0=_context.catch(1),console.log("SM - [ROGUE] Extractor ".concat(extractorGroupName," - failed to extract ").concat(extractorName),_context.t0),extractedValue="NOT_FOUND";case 11:getSmDataLayer()[extractorGroupName][extractorName]=extractedValue._||extractedValue;case 12:case"end":return _context.stop()}},_callee,null,[[1,7]])}));return function(e){return _ref.apply(this,arguments)}}())).then(function(){callEventCrawlerFinalized("Crawler finished successfully")})},crawl=function(e){window[smDataLayerKey]=getSmDataLayer();var t=Object.entries(e).length,n=0;Object(helpers__WEBPACK_IMPORTED_MODULE_5__.d)(Object.entries(e),function(){var e=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(o){var r,i,s;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(o,2),i=r[0],s=r[1],e.prev=1,e.next=4,Object(helpers__WEBPACK_IMPORTED_MODULE_5__.h)(function(){return shouldRunExtractorGroup(s)});case 4:if(!e.sent){e.next=9;break}getSmDataLayer()[i]={},runExtractorGroup(i,s),e.next=11;break;case 9:(n+=1)==t&&callEventCrawlerFinalized("Crawler finished without extractors");case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.warn("SM - [ROGUE] Extractor ".concat(i," - failed to run")),callEventCrawlerFinalized("Crawler finished with error");case 17:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}())};__webpack_exports__.a=crawl},function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(2),s=n.n(i),a=n(9),c=n(7);s()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c.a.isEnvLocal){e.next=7;break}return e.next=4,n.e(1).then(n.t.bind(null,16,3)).then(function(e){return e.default});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0={home:{extractors:{},shouldRun:"rogue => rogue.select('body.homepage').exists()"}};case 8:t=e.t0,Object(a.a)(t),e.next=15;break;case 12:e.prev=12,e.t1=e.catch(0),console.warn("SM - [ROGUE] Crawler failed to run: ",e.t1);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))()},function(e,t,n){var o=function(){return this||"object"==typeof self&&self}()||Function("return this")(),r=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,i=r&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,e.exports=n(12),r)o.regeneratorRuntime=i;else try{delete o.regeneratorRuntime}catch(e){o.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,o=Object.prototype,r=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",l="object"==typeof e,u=t.regeneratorRuntime;if(u)l&&(e.exports=u);else{(u=t.regeneratorRuntime=l?e.exports:{}).wrap=I;var p="suspendedStart",d="suspendedYield",f="executing",g="completed",h={},m={};m[s]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(T([])));y&&y!==o&&r.call(y,s)&&(m=y);var S=C.prototype=b.prototype=Object.create(m);_.prototype=S.constructor=C,C.constructor=_,C[c]=_.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(S),e},u.awrap=function(e){return{__await:e}},E(O.prototype),O.prototype[a]=function(){return this},u.AsyncIterator=O,u.async=function(e,t,n,o){var r=new O(I(e,t,n,o));return u.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},E(S),S[c]="Generator",S[s]=function(){return this},S.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},u.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(H),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(o,r){return a.type="throw",a.arg=e,t.next=o,r&&(t.method="next",t.arg=n),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;H(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:T(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=n),h}}}function I(e,t,n,o){var r=t&&t.prototype instanceof b?t:b,i=Object.create(r.prototype),s=new k(o||[]);return i._invoke=function(e,t,n){var o=p;return function(r,i){if(o===f)throw new Error("Generator is already running");if(o===g){if("throw"===r)throw i;return A()}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var a=P(s,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=w(e,t,n);if("normal"===c.type){if(o=n.done?g:d,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=g,n.method="throw",n.arg=c.arg)}}}(e,n,s),i}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function b(){}function _(){}function C(){}function E(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function O(e){var t;this._invoke=function(n,o){function i(){return new Promise(function(t,i){!function t(n,o,i,s){var a=w(e[n],e,o);if("throw"!==a.type){var c=a.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,i,s)},function(e){t("throw",e,i,s)}):Promise.resolve(l).then(function(e){c.value=e,i(c)},function(e){return t("throw",e,i,s)})}s(a.arg)}(n,o,t,i)})}return t=t?t.then(i,i):i()}}function P(e,t){var o=e.iterator[t.method];if(o===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=w(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(r.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}}])}]);
